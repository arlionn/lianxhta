


# nbstata 插件



# stata-workbench 插件

https://github.com/tmonk/stata-workbench

需要先安装 https://github.com/tmonk/mcp-stata

# vscode-stata 插件

- https://github.com/kylebutts/vscode-stata


# Four new DiD studies + a textbook update

- https://www.diddigest.xyz/p/four-new-did-studies-a-textbook-update

# SDID-引力模型
- Nagengast, A. J., & Yotov, Y. V. (2025). Staggered Difference-in-Differences in Gravity Settings: Revisiting the Effects of Trade Agreements. American Economic Journal: Applied Economics, 17(1), 271–296. [Link](https://doi.org/10.1257/app.20230089) (rep), [PDF](http://sci-hub.ren/10.1257/app.20230089), [Appendix](https://www.aeaweb.org/doi/10.1257/app.20230089.appx), [Google](<https://scholar.google.com/scholar?q=Staggered Difference-in-Differences in Gravity Settings: Revisiting the Effects of Trade Agreements>). [Replication](https://doi.org/10.3886/E194561V1) (Stata codes)


# Difference-in-Differences-via-CCE

Brown, N., Butts, K., & Westerlund, J. (2023). Simple Difference-in-Differences Estimation in Fixed-T Panels (Version 2). arXiv. [Link](https://doi.org/10.48550/arXiv.2301.11358) (rep), [PDF](https://arxiv.org/pdf/2301.11358.pdf), [Google](<https://scholar.google.com/scholar?q=Simple Difference-in-Differences Estimation in Fixed-T Panels (Version 2)>). [github](<https://github.com/kylebutts/Difference-in-Differences-via-CCE>).

Abstract
--------

The present paper proposes a new treatment effects estimator that is valid when the number of time periods is small, and the parallel trends condition holds conditional on covariates and unobserved heterogeneity in the form of interactive fixed effects. The estimator also allow the control variables to be affected by treatment and it enables estimation of the resulting indirect effect on the outcome variable. The asymptotic properties of the estimator are established and their accuracy in small samples is investigated using Monte Carlo simulations. The empirical usefulness of the estimator is illustrated using as an example the effect of increased trade competition on firm markups in China.

Replication
-----------

### Monte Carlo Simulations

1.  `code/simulations/simulation-1.jl`

-   Simulations presented in Table 1 and Table 2
-   There are set of helper functions in `code/simulations/helpers.module.jl` containing estimation functions and the DGP.

### Application

1.  `code/Trade-Liberalization-and-Markup-Dispersion/analysis.R`

-   Takes the data from [Lu and Yu (2015)](https://www.aeaweb.org/articles?id=10.1257/app.20140350) and recreates Figure 2 in their paper.
-   Estimates the C^2^ED^2^ model to estimate the effect of TWO ascension on markup dispersion in high-tariff industries.
-   Decomposes the effect into the mediated effect via decrease in marginal cost dispersion.







# Stata：xtgmmfa-

> Juodis, A., & Sarafidis, V. (**2022**). A linear estimator for factor-augmented fixed-T panels with endogenous regressors. *Journal of Business & Economic Statistics*, 40(1), 1–15. [Link](https://doi.org/10.1080/07350015.2020.1766469), [PDF](http://sci-hub.ren/10.1080/07350015.2020.1766469), [PDF-wp](https://www.monash.edu/business/ebs/our-research/publications/ebs/wp05-2020.pdf), [Google](https://scholar.google.com/scholar?q=A+linear+estimator+for+factor-augmented+fixed-T+panels+with+endogenous+regressors+Juodis+Sarafidis+2022). Stata 命令: `xtgmmfa`

## 简介

`xtgmmfa` performs GMM estimation for fixed-T panel data model with multifactor structural errors and the presence of endogenous variables. The underlying methodology involves approximating the unobserved common factors using observed factor proxies. The resulting moment conditions are linear in the parameters. See [Juodis](https://doi.org/10.1080/07350015.2020.1766469) and Sarafidis ([2020](http://sci-hub.ren/10.1080/07350015.2020.1766469)) for more details.

## Stata 实操

### 安装 xtgmmfa

```stata
ssc install xtgmmfa, all replace 

help xtgmmfa
```

执行上述命令后，Stata 在安装 `xtgmmfa` 命令的同时，会自动将作者提供的范例数据 **** 下载到当前工作路径下。

```stata
use "js22data.dta", clear
```

### 语法格式

```stata
xtgmmfa depvar [indepvars] [if] [in] [, options]
```


### 实例

```stata
// Example 1: Water data (Joudis and Sarafidis, 2022)
  use "js22data.dta", clear

* Regularization: column M_F of table 1 in Joudis and Sarafidis (2022)
  xtgmmfa l(0/1).lcons price rain temp, ///
    gmm(l.lcons l.price rain temp)      ///
    unof(smi, type(1)) nocons wmat(1)

* Best-Subset Selection: column M1_c of table 1 in Joudis and Sarafidis (2022)
  xtgmmfa l(0/1).lcons price rain temp, ///
    gmm(l.lcons l.price rain temp)      ///
    unof(smi, bss type(1) lmax(4)) nocons wmat(1)

// Example 2: Arellano-Bond data
  use "abdata.dta", clear

* One-step GMM with robust standard errors
  xtgmmfa l(0/1).n k w ys, gmm(l.n l.k l.w l.ys) one r

* Two-step GMM with Windmeijer-corrected robust standard errors
  xtgmmfa l(0/1).n k w ys, gmm(l.n l.k l.w l.ys) r
```

## 参考文献

- Arellano, M., & Bond, S. R. (**1991**). Some tests of specification for panel data: Monte Carlo evidence and an application to employment equations. *The Review of Economic Studies*, 58(2), 277–297. [Link](https://doi.org/10.2307/2297968), [PDF](http://sci-hub.ren/10.2307/2297968), [Google](https://scholar.google.com/scholar?q=Some+tests+of+specification+for+panel+data:+Monte+Carlo+evidence+and+an+application+to+employment+equations+Arellano+Bond+1991).
- Juodis, A., & Sarafidis, V. (**2022**). A linear estimator for factor-augmented fixed-T panels with endogenous regressors. *Journal of Business & Economic Statistics*, 40(1), 1–15. [Link](https://doi.org/10.1080/07350015.2020.1766469), [PDF](http://sci-hub.ren/10.1080/07350015.2020.1766469), [PDF-wp](https://www.monash.edu/business/ebs/our-research/publications/ebs/wp05-2020.pdf), [Google](https://scholar.google.com/scholar?q=A+linear+estimator+for+factor-augmented+fixed-T+panels+with+endogenous+regressors+Juodis+Sarafidis+2022).
- Roodman, D. (**2009**). A note on the theme of too many instruments. *Oxford Bulletin of Economics and Statistics*, 71(1), 135–158. [Link](https://doi.org/10.1111/j.1468-0084.2008.00542.x), [PDF](http://sci-hub.ren/10.1111/j.1468-0084.2008.00542.x), [Google](https://scholar.google.com/scholar?q=A+note+on+the+theme+of+too+many+instruments+Roodman+2009).
- Windmeijer, F. (**2005**). A finite sample correction for the variance of linear efficient two-step GMM estimators. *Journal of Econometrics*, 126(1), 25–51. [Link](https://doi.org/10.1016/j.jeconom.2004.02.005), [PDF](http://sci-hub.ren/10.1016/j.jeconom.2004.02.005), [Google](https://scholar.google.com/scholar?q=A+finite+sample+correction+for+the+variance+of+linear+efficient+two-step+GMM+estimators+Windmeijer+2005).


# jive

Butts, K. F. (2025). jive: Jackknife instrumental variables estimation. https://github.com/
kylebutts/jive. Git commit 393e4b8. Accessed 30 May 2025.

# Lags, Leave-Outs and Fixed Effects
Chudik, A., Ellis, C. M., & Jaspersen, J. G. (2025). Lags, Leave-Outs and Fixed Effects. Federal Reserve Bank of Dallas Working paper, 2536. [Link](https://doi.org/10.2139/ssrn.4787799), [PDF](https://www.dallasfed.org/~/media/documents/research/papers/2025/wp2536.pdf), [Google](<https://scholar.google.com/scholar?q=Lags, Leave-Outs and Fixed Effects>).
- 附录中提供了各类文献列表



# cjive：基于聚类刀切法的工具变量估计

- Frandsen, B., Leslie, E., & Mcintyre, S. (2025). Cluster Jackknife Instrumental Variables Estimation. Review of Economics and Statistics, 1–19. [Link](https://doi.org/10.1162/rest.a.263), [PDF](http://sci-hub.ren/10.1162/rest.a.263), [Google](<https://scholar.google.com/scholar?q=Cluster Jackknife Instrumental Variables Estimation>), [Replication](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/CLPGTP)

  - Researchers commonly use jackknife-based instrumental variables estimators to eliminate the many-instruments bias of two-stage least squares. Where inference must be clustered, however, the jackknife fails to eliminate the bias. We propose a cluster-jackknife approach in which first-stage predicted values for each observation are constructed from a regression that leaves out the observation’s entire cluster. The cluster-jackknife instrumental variables estimator (CJIVE) eliminates many-instruments bias, and consistently estimates causal effects in the traditional linear model and local average treatment effects in the heterogeneous treatment effects framework. We illustrate the method in an application estimating the effects of pre-trial detention in Miami-Dade County.



# 论文推介：QJE-生成式AI

- Brynjolfsson, E., Li, D., & Raymond, L. (2025). Generative AI at Work. The Quarterly Journal of Economics, 140(2), 889–942. [Link](https://doi.org/10.1093/qje/qjae044) (rep), [PDF](http://sci-hub.ren/10.1093/qje/qjae044), [Google](<https://scholar.google.com/scholar?q=Generative AI at Work>). [Replication](https://doi.org/10.7910/DVN/FSV1X7) (Stata codes, **no data**) 

- 核心方法：
  - DID
  - 事件研究法
  - 分仓回归 

- Stata 命令：
  - 回归分析
    - `reghdfe`
    - `binsreg`
  - 事件研究法：
    - `eventdd`、`eventstudyinteract`、`event_plot`
  - `forvalues`, `foreach`
  - `egen var = xtile(), n(5)`: 将连续变量 skill 分成 5 组
  - `estadd`、`outreg2`
  - `coefplot`


# 论文推介：EDID-有效DID

Chen, X., Sant'anna, P. H. C., & Xie, H. (2025). Efficient Difference-in-Differences and Event Study Estimators (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2506.17729) (rep), [PDF](https://arxiv.org/pdf/2506.17729.pdf), [Google](<https://scholar.google.com/scholar?q=Efficient Difference-in-Differences and Event Study Estimators (Version 1)>).


# 
- Ellis, C., & Jaspersen, J. G. (2024). Lags, Leave-Outs and Fixed Effects. SSRN Electronic Journal. [Link](https://doi.org/10.2139/ssrn.4787799), [Google](<https://scholar.google.com/scholar?q=Lags, Leave-Outs and Fixed Effects>).


# 翻译+补充：空间处理效应的因果推断

>**Source**: Butts, K., Blog, 2025. Causal Inference with Spatial Treatments. [-Link-](https://www.kylebutts.com/blog/2025-09-23-spatial_treatments/)

任务说明：

- 翻译成中文，并结合中文学术界的相关研究进行适当补充说明。
- 补充这篇推文中提及的核心文献；
- 文中的缺失的相关理论基础、方法论等内容，进行适当补充说明。
- 可以借助 AI 工具，但要确保译文准确流畅，符合中文学术写作规范。
- 可以在 VScode 编辑器中安装 Markdown paste 插件，使用快捷键 `Alt + Ctrl + V` 进行粘贴，以便快速将网页内容转换为 Markdown 格式。

Treatment often occurs at a point in space: a [new apartment is constructed](https://direct.mit.edu/rest/article-abstract/105/2/359/100977/Local-Effects-of-Large-New-Apartment-Buildings-in); a [new firm opens on a street](https://academic.oup.com/jeea/article-abstract/22/4/1798/7472115?redirectedFrom=fulltext); or [an abandoned lot is cleaned up](https://www.pnas.org/doi/10.1073/pnas.1718503115). Evaluating the effects of this treatment, like all causal inference, requires finding a good control group.

This blog post is meant to serve as a starting point when thinking about this. I will cover two papers, one of [my own](https://www.sciencedirect.com/science/article/pii/S0094119022000705) and an excellent [paper](https://michaelpollmann.github.io/files/pollmann_spatial_treatments.pdf) by [Michael Pollmann](https://michaelpollmann.github.io/). They both offer a different strategy for selecting a control group, so I want to summarize each strategy and the relative advantages and disadvantages.

As a leading example, we will consider evaluating the impact of a new apartment on rents in the local area. Our dataset would consist of housing units and their observed rent. Treatment is the set of points where apartments were built. The outcome of interest is the change in rents before vs. after the appartment is built.

## Butts (2023)

My work considers a common strategy in urban work. The method considers an "inner ring" and an "outer ring", where the inner ring is assumed to be impacted by treatment and the outer ring is not. The idea here is that by making the outer ring small enough, you're looking at units within the same "neighborhood" (e.g. looking at 600m around a new apartment). Therefore, any neighborhood-level time shocks (changes to amenities, demand shocks, firm openings, etc.) would presumably be the same for all the units.

If you believe in this "common neighborhood shocks" assumption, then the counterfactual trends is the same as you move from the treatment location towards the outer ring. With this assumption, you can estimate a "treatment effect curve" that allows you to trace out treatment effects over space. This effectively says all shocks to rent are equal for housing within the outer ring.

As an example of what these estimate would look like, I revisit a paper studying the effects on a sex offender moving to a street on home prices in the paper. There is a very large negative effect on the same city block as the offender, but then quickly moves to 0. After about 1 tenth of a mile, trends in home prices are flat, supporting the "common neighborhood shocks" assumption.

**Figure:** Example of treatment effect curve using Linden and Rockoff paper

<img src="https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20260111162415.png" width="700" alt="Example of treatment effect curve using Linden and Rockoff paper">

However, there are some cases where you might not believe the common trends assumption. For example, think of a polycentric city where there are multiple "business streets" that have a lot of store fronts and apartments. This is where new aparments will be built. But, as you move outwards from the business area, you tend to enter more "residential streets" with more single-family homes. Then, the inner ring will consist mostly of apartments on dense streets and the outer ring will be mostly residential streets. If there are shocks to specifically residential homes or specifically to apartments, the inner and outer ring will be on differential trends.

## Pollmann (WP)

Michael Pollmann's paper (R&R at Econometrica) takes an alternative approach. Instead of comparing units that are really close to treatment to slightly further away, they focus on the case of finding comparable locations that could have been plausible treatment location. In our apartment example, we would be looking for parcels that were very likely to have a new apartment built there, but did not due to random chance.

This is really helpful if we think there is a difference between the kinds of units that are very close to treatment (inner ring) to the kinds of units that are slightly further away (outer ring). Instead it compares units very close to treatment to other units who are plausibly very close to an unrealized potential treamtent location. That is, which housing units are near to a place that very likely could have had a new apartment get built, but did not for idiosyncratic reasons. In our example, this would be comparing "business streets" with a new apartment to other "business streets" that did not get a new apartment.

The difficult part of this approach is therefore in finding a good set of comparison locations that could have been treated but did not by random chance. The simplest way to think about doing this is via a matching type strategy. Imagine looking at a bunch of parcels and measuring information about that parcel (e.g. zoning, lot size, it's census tract, and characteristics of the current residents). Then, you would find comparison parcels that are similar along all these dimensions (i.e. matching).

However, Pollman points out that often times treatment is not assigned to a location based solely on the location's own characteristics, but also depending on the characteristics of the neighborhood. It might matter that a parcel is underdeveloped for apartment construction, but it might also matter the characteristics of the surrounding parcels (e.g. are there a lot of consumptive amenities that people will pay for nearby?). Another example is there being a difference between there being a lot of low-income people in a building versus being on a street with lots of low-income buildings. Therefore, we should really be thinking about matching both on the location's own $X$ s and the neighboring unit's $X$ s.

In other words, imagine you have maps of all the units and their values along a bunch of different $X$ values. Then, you want to do matching not only on your own $X$, but the distribution of $X$ s of your neighbors. This creates a bit of a high-dimensional covariate problem where even if the $X$ s are low-dimensional, spatial functions of units' $X$ s can be high-dimesnional (my next-door neighbor $X$, average of my street's $X$, average of my tract's X , etc.).

Section 4.2 of their paper shows a really cool way of estiamting propensity scores based on spatially-varying data. They use a convolutional neural network to estimate a propensity score map. Convolutional neural networks are popular in analyzing image data as it looks at a focal point and "sees" characteristics around that point (i.e. looks at the neighborhood). Then the neural net will learn to predict treatment based on it's view of the neighborhood (i.e. fitting a propensity score model). The method is a bit complicated, but fortunately they have [example code](https://github.com/michaelpollmann/spatialTreat-example) that you can use if you try to implement this method.

> <https://github.com/michaelpollmann/spatialTreat-example>

From this neural network, you would receive a \`heat map' of where treatment is likely to occur. This map might look like this map of lightning strike intensity. From this propensity-score map, you could draw (according the propensity score) placebo locations to use as the comparison units. If this were your map, you would end up with a lot of placebo locations in the Texas, Louisianna, and Florida.

**Figure:** Washington Post Figure highlighting lightning intensity

<img src="https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20260111163203.png" width="700" alt="Washington Post Figure highlighting lightning intensity">

## Conclusion


We have covered two primary ways you might analyze treatments that occur at a point in space. Here's the cliff-notes:

1.  Compare points very close to treatment to those slightly further away (assuming these units look similar).

Approach 1 requires assumptions on where treatment is located and how units might change as you move away from treatment.

2.  or, compare units very close to the treatment point to comparison units that are very close to plausible alternative treatment locations.

Approach 2 requires assumptions on the comparability of treated units to the selected comparison placebo locations.

# 翻译+补充：Fisher 随机化检验的使用与误用

>**Source**: Butts, K., Blog, 2025. On the use and misuse of Fisher Randomization Tests. [-Link-](https://www.kylebutts.com/blog/2025-09-18-misuse_of_randomization_inference/)

任务说明：

- 翻译成中文，并结合中文学术界的相关研究进行适当补充说明。
- 补充这篇推文中提及的核心文献；
- 文中的缺失的相关理论基础、方法论等内容，进行适当补充说明。
- 可以借助 AI 工具，但要确保译文准确流畅，符合中文学术写作规范。
- 可以在 VScode 编辑器中安装 Markdown paste 插件，使用快捷键 `Alt + Ctrl + V` 进行粘贴，以便快速将网页内容转换为 Markdown 格式。

# 翻译+补充：因子模型与合成控制法

>**Source**: Butts, K., Blog, 2025. [Factor Models and Synthetic Control](https://www.kylebutts.com/blog/factor-model/). 

任务说明：

- 翻译成中文，并结合中文学术界的相关研究进行适当补充说明。
- 补充这篇推文中提及的核心文献；
- 文中的缺失的相关理论基础、方法论等内容，进行适当补充说明。
- 可以借助 AI 工具，但要确保译文准确流畅，符合中文学术写作规范。
- 可以在 VScode 编辑器中安装 Markdown paste 插件，使用快捷键 `Alt + Ctrl + V` 进行粘贴，以便快速将网页内容转换为 Markdown 格式。



# 论文推介：数据可复现性与隐私保护
- Vilhuber, L. (2023). Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor. Journal of Econometrics, 235(2), 2285–2294. [Link](https://doi.org/10.1016/j.jeconom.2023.05.001), [PDF](https://www.sciencedirect.com/science/article/pii/S0304407623001471/pdfft?md5=eadd7fff56441a876e234fcb96a157b3&pid=1-s2.0-S0304407623001471-main.pdf), [Google](<https://scholar.google.com/scholar?q=Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor>).



# 论文推介：审查官工具变量设计

- Goldsmith-Pinkham, P., Hull, P., & Kolesár, M. (2025). Leniency Designs: An Operator’s Manual. NBER working paper. [Link](https://doi.org/10.3386/w34473), [PDF](https://www.nber.org/system/files/working_papers/w34473/w34473.pdf), [Google](<https://scholar.google.com/scholar?q=Leniency Designs: An Operator’s Manual>).

本文基于近期计量经济学文献，制定了一份关于「宽严倾向设计」（又称法官或审查官工具变量设计）的分步指南。无偏刀切工具变量估计量（UJIVE）专为利用外生宽严倾向差异而设计，即使存在大量决策者或控制变量，也能避免潜在的隐性偏差。我们展示了如何利用UJIVE检验宽严倾向设计的核心假设（包括准随机分配和平均第一阶段单调性），并探究处理效应估计值的外部有效性。本文进一步探讨了统计推断问题，认为非聚类标准误在多数情况下是适用的。通过重新分析 Farre-Mensa et al. (2020) 的研究——该研究利用审查官准随机分配来估计专利对初创企业的价值——我们对上述操作清单进行了实证演示。

### 关键术语说明（贴合计量经济学语境）
1. **leniency designs**：宽严倾向设计（核心译法，突出“决策者在干预强度上的固有差异”这一方法本质，与中文文献术语一致）
2. **judge or examiner instrument designs**：法官或审查官工具变量设计（补充说明，明确该方法的工具变量属性）
3. **unbiased jackknife instrumental variables estimator (UJIVE)**：无偏刀切工具变量估计量（保留缩写UJIVE，符合计量方法术语命名习惯）
4. **quasi-random assignment**：准随机分配（因果推断领域标准译法）
5. **average first-stage monotonicity**：平均第一阶段单调性（工具变量估计的核心假设术语）
6. **non-clustered standard errors**：非聚类标准误（计量经济学中推断方法的规范表述）







# 论文推介：Judge IV-审查官-法官设计

- Chyn, E., Frandsen, B., & Leslie, E. (2025). Examiner and Judge Designs in Economics: A Practitioner’s Guide. Journal of Economic Literature, 63(2), 401–439. [Link](https://doi.org/10.1257/jel.20241719) (rep), [PDF](http://sci-hub.ren/10.1257/jel.20241719), [Appendix](https://www.aeaweb.org/doi/10.1257/jel.20241719.appx), [Google](<https://scholar.google.com/scholar?q=Examiner and Judge Designs in Economics: A Practitioner’s Guide>). [-Replication-](https://doi.org/10.3886/E209883V1), [github](https://github.com/gphk-metrics/stata-manyiv)
  - [paper](https://www.nber.org/system/files/working_papers/w32348/w32348.pdf). [Data and code for empirical example](https://www.dropbox.com/scl/fo/fq2ldbu18yriqbq28kv2o/AAyFiG0RwxQxtCYwk5-DVKw?rlkey=lm4q6intf0n413pvuy82p6rc2&st=yyfp90hy&dl=0). [Stata manyiv package.](https://github.com/gphk-metrics/stata-manyiv)
  - The adjustment, dubbed “V tF ” by Lee et al. (2023) can be implemented in Stata by following instructions on David Lee’s website: <https://irs.princeton.edu/davidlee-supplementVTF>.
  - ${ }^{33}$ It is straightforward to use standard statistical program such as Stata to construct the CJIVE estimator. When assignment to judges is not clustered, researchers can run UJIVE or IJIVE using the "manyiv" package available at <https://github.com/kolesarm/ManyIV>. Note that none of the variables should be residualized prior to running any of these programs.
  - 本文为实证研究者提供了基于法官和审查官实施处理或其他干预措施倾向差异的研究设计介绍与指南。我们回顾了该研究设计的基本理论，概述了该设计识别因果效应所需的假设条件，描述了识别条件的实证检验方法，并探讨了研究者在估计过程中必须做出的选择及其相关权衡。通过一项实证案例研究，我们展示了相关概念与最佳实践——该案例采用审查官倾向研究设计，探讨了审前羁押的影响。


## 安装

参见作者 github 仓库：<>

```stata
local github "https://raw.githubusercontent.com"
net install manyiv, from(`github'/gphk-metrics/stata-manyiv/main/)
manyiv _plugin_check
```

基本语法：

```stata
manyiv depvar (endogenous = instrument) [exogenous], options

help manyiv
```

### Examples

```
clear
set seed 1729
set obs 1000
gen u  = rnormal()
gen z1 = rnormal()
gen z2 = rnormal()
gen e  = rnormal() + u
gen c  = int(runiform() * 10)
gen fe = int(runiform() * 15)
gen iv = int(runiform() * 8)
gen w  = rnormal()
gen x  = 1 + 0.1 * z1 - 0.2 * z2 - 1/(1 + iv) + u
gen y  = 1 + x + w + 1/(1 + fe) + e

manyiv y (x = z1 z2) w
manyiv y (x = z1 z2) w, cluster(c)
manyiv y (x = z1 z2) w, absorb(fe) cluster(c)
manyiv y (x = z1 z2) w, absorbiv(iv) cluster(c)
manyiv y (x = z1 z2) w, absorb(fe) absorbiv(iv) cluster(c)
manyiv y (x = .)     w, absorb(fe) absorbiv(iv) cluster(c)
```

You can also save any of the estimators to a Stata table:

```
manyiv, est(TSLS)  vce(cluster)
manyiv, est(UJIVE) vce(cluster)
```

There are instances where jive/ujive will fail because they are leave-one-out estimators and a covariate or fixed effect group will be collinear with a given observation. If dealing with the issue manually is otherwise prohibitive, the `forcejive` option will prompt `manyiv` to drop observations and/or covariates until jive/ujive can run.

```
clear
input z1 z2 fe iv
-1 -1 0 0
1  1 0 0
3  3 1 0
-3 -3 1 1
0  0 2 1
0  0 2 1
1 2 3 2
2 3 3 2
end
gen z3 = _n^2
gen x  = z1 + z2 + z3 + rnormal()
gen y  = x + rnormal()
manyiv y (x = z1 z2), absorb(fe) absorbiv(iv)
manyiv y (x = z1 z2), absorb(fe) absorbiv(iv) forcejive
```

## 相关文献

- "Judging Judge Fixed Effects: Testing the Identifying Assumptions in Judge Fixed-Effects Designs," American Economic Review, 2023 (with Brigham Frandsen and Lars Lefgren).  paper, use 

```stata
* semi-parametric version of our test
ssc install testjfe
```






# sjive：Shrunken jackknife instrumental variables estimator (SJIVE)

- `sjive` implements the Shrunken Jackknife Instrumental Variables Estimator (SJIVE) developed by Frandsen, Lefgren, Leslie, and McIntyre (2025). `sjive` improves upon standard JIVE estimation by applying empirical Bayes shrinkage to first-stage fitted values, consequently improving the     second-stage precision of treatment effect estimates. This is particularly beneficial in many-instrument designs like judge fixed effects.

## Stata 实操
### 安装

```stata
ssc install sjive, all replace 
```

完成后，会自动将作者提供的范例数据 (`sjiveexample.dta`) 下载到当前工作路径下，随后可以参照 `help sjive` 中的实例代码进行实操练习。

## 参考文献

- Frandsen, B., Lefgren, L., Leslie, E., & Mcintyre, S. (2026). The Incredible Shrinking Instruments: Using Empirical Bayes to Increase Efficiency in IV Designs with Many Instruments. National Bureau of Economic Research. [Link](https://doi.org/10.3386/w34634), [PDF](https://www.nber.org/system/files/working_papers/w34634/w34634.pdf), [Google](<https://scholar.google.com/scholar?q=The Incredible Shrinking Instruments: Using Empirical Bayes to Increase Efficiency in IV Designs with Many Instruments>).
- Angrist, Joshua D., Guido W. Imbens, and Alan B. Krueger (1999). Jackknife Instrumental Variables Estimation. Journal of Applied Econometrics, 14(1), 57-67.
- Kolesar, Michal (2013). Estimation in an Instrumental Variables Model with Treatment Effect Heterogeneity. Unpublished working paper. [PDF](https://www.princeton.edu/~mkolesar/papers/late_estimation.pdf)


# weakivtest2：多个内生变量的弱工具变量检验

- **Title**: weakivtest2：多个内生变量的弱工具变量检验
- **Keywords**: IV, 弱工具变量, weak instruments, heteroskedasticity, autocorrelation, Lewis, Mertens, Stock, Yoo, Olea, Pflueger


## 简介
`weakivtest2` 用于实现基于纠偏的稳健型弱工具变量检验，适用于具有多个内生变量的两阶段最小二乘法 (2SLS) 回归模型。该检验方法由 Lewis 和 Mertens (2024, Review of Economic Studies) 提出。`weakivtest2` 支持绝对和相对偏差标准、本地零和本地秩降低一个渐近理论，并允许对整个 2SLS 估计量向量或单个元素进行检验。

该命令可以在执行完 `ivreg2`, `xtivreg2` 和 `ivreghdfe` 等命令后用于执行弱工具变量检验。

## 安装

```stata
net describe http://repec.org/bocode/w/weakivtest2

// 安装并下载作者提供的 dofile 和范例数据
scc install weakivtest2, all replace 
```

下载完成后可以执行如下命令打开作者提供的 dofile：

```stata
doedit weakivtest2_demo.do

use "dataFiscal.dta", clear 
```



## 参考文献

- Lewis, Gregory, and Kalyan Mertens (2024). Weak Instruments in Linear IV Models with Multiple Endogenous Variables. Review of Economic Studies, 91(1), 1-28. [Link](https://doi.org/10.1093/restud/rdac033), [PDF](https://academic.oup.com/restud/article-pdf/91/1/1/52123311/rdac033.pdf), [Google](<https://scholar.google.com/scholar?q=Weak Instruments in Linear IV Models with Multiple Endogenous Variables>).
- Stock, James H., Jonathan H. Wright, and Motohiro Yogo (2002). A Survey of Weak Instruments and Weak Identification in Generalized Method of Moments. Journal of Business & Economic Statistics, 20(4), 518-529.



# fejiv：Fixed effect jackknife IV (FEJIV) estimation

```stata
help fejiv
```

## 参考文献

- Chao, J. C., Swanson, N. R., & Woutersen, T. (2023). Jackknife estimation of a cluster-sample IV regression model with many weak instruments. Journal of Econometrics, 235(2), 1747–1769. [Link](https://doi.org/10.1016/j.jeconom.2022.12.011), [PDF](https://eller.arizona.edu/sites/default/files/Jackknife%20estimation%20of%20a%20cluster%20sample%20IV%20%20many%20weak%20instruments%20Chao%20Swanson%20Woutersen%202023.pdf), [-PDF2-](), [Google](<https://scholar.google.com/scholar?q=Jackknife estimation of a cluster-sample IV regression model with many weak instruments>).
- Słoczyński, T. (2024). When Should We (Not) Interpret Linear IV Estimands as LATE? (Version 7). arXiv. [Link](https://doi.org/10.48550/arXiv.2011.06695) (rep), [PDF](https://arxiv.org/pdf/2011.06695.pdf), [Google](<https://scholar.google.com/scholar?q=When Should We (Not) Interpret Linear IV Estimands as LATE? (Version 7)>).
- Frandsen, B., Leslie, E., & Mcintyre, S. (2025). Cluster Jackknife Instrumental Variables Estimation. Review of Economics and Statistics, 1–19. [Link](https://doi.org/10.1162/rest.a.263), [Google](<https://scholar.google.com/scholar?q=Cluster Jackknife Instrumental Variables Estimation>).



# 增强型合成控制法的应用综述

- Krajewski, T., & Hudgens, M. (2024). The augmented synthetic control method in public health and biomedical research. Statistical Methods in Medical Research, 33(3), 376–391. [Link](https://doi.org/10.1177/09622802231224638), [PDF](https://journals.sagepub.com/doi/epdf/10.1177/09622802231224638), [Google](<https://scholar.google.com/scholar?q=The augmented synthetic control method in public health and biomedical research>).



# sotable：生成可发布的汇总统计表格

`findit sotable`

```stata
net install st0718_1.pkg, replace 

net get st0718_1.pkg, replace //SJ24-3 下载范例数据到当前工作路径
net get st0718.pkg, replace  // SJ23-2，sample dofile
```


# aivreg — Anti-IV Regression

aivreg implements the anti-IV estimator outlined in Bell, Billings, Calder-Wang, & Zhong ([2024](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4899974)). The method allows the user to estimate implicit amenity prices in the presence of an unobservable confounder.

- 论文研究背景、理论方面的介绍，可以下载 Bell, Billings, Calder-Wang, & Zhong ([2024](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4899974) PDF 文档后，传给 ChatGPT，然后使用 []()


## Stata 实操
### 安装

```stata
ssc install aivreg, all replace 
```

完成后，会自动将作者提供的范例数据 (`housing_aivreg_example.dta` 和 `safety_aivreg_example.dta`) 下载到当前工作路径下，随后可以参照 `help aivreg` 中的实例代码进行实操练习。



- Bell, A., Billings, S. B., Calder-Wang, S., & Zhong, S. (2024). An Anti-IV Approach for Pricing Residential Amenities: Applications to Flood Risk *. SSRN Electronic Journal. [Link](https://doi.org/10.2139/ssrn.4899974), [Google](<https://scholar.google.com/scholar?q=An Anti-IV Approach for Pricing Residential Amenities: Applications to Flood Risk *>).

# FE的前世今生

Bellemare, M. F., & Millimet, D. L. (2025). Retrospectives: Yair Mundlak and the Fixed Effects Estimator. Journal of Economic Perspectives, 39(2), 261–274. [Link](https://doi.org/10.1257/jep.20241406) (rep), [PDF](https://pubs.aeaweb.org/doi/pdfplus/10.1257/jep.20241406), [Appendix](https://www.aeaweb.org/doi/10.1257/jep.20241406.appx), [Google](<https://scholar.google.com/scholar?q=Retrospectives: Yair Mundlak and the Fixed Effects Estimator>).
  
# 固定效应模型的误用

- Millimet, D. L., & Bellemare, M. F. (2025). On the (Mis) Use of the Fixed Effects Estimator. Oxford Bulletin of Economics and Statistics. Portico. [Link](https://doi.org/10.1111/obes.70031), [PDF](https://onlinelibrary.wiley.com/doi/epdf/10.1111/obes.70031), [Google](<https://scholar.google.com/scholar?q=On the (Mis) Use of the Fixed Effects Estimator. Oxford Bulletin of Economics and Statistics>).

  - 摘要：涵盖多个单元和时期的数据能够控制与协变量相关的不随时间变化的异质性。尽管研究者可通过多种方式实现这一目的，但固定效应估计量——又称组内估计量，与最小二乘虚拟变量法等价——已成为默认选择。但当原本假设不随时间变化的属性并非真正不随时间变化（即这些属性会随面板长度变化）时，随着研究者纳入更多时期数据，固定效应估计量可能会产生显著偏差。我们的研究表明，在有限样本下，此时一阶差分法和新的滚动估计量可为研究者提供固定效应估计量的实用替代方案。这些估计量实施简便，且在特定数据生成过程下，相较于固定效应估计量能显著降低偏差。最重要的是，研究者应始终提供多种估计量的结果。我们通过模拟实验和四项重复验证对此进行了演示。
  - 关键术语
    - **time-invariant heterogeneity**：不随时间变化的异质性（面板数据分析核心术语，强调个体固有差异的时间稳定性）
    - **fixed effects estimator**：固定效应估计量（标准译法，简称“FE估计量”）
    - **within estimator**：组内估计量（固定效应估计量的等价表述，中文文献通用译法）
    - **least squares dummy variable approach**：最小二乘虚拟变量法（简称“LSDV法”，与固定效应估计量数学等价）
    - **first-differencing**：一阶差分法（面板数据消除个体固定效应的经典方法）
    - **rolling estimators**：滚动估计量（新兴动态面板估计方法，此处“rolling”按计量领域习惯译为“滚动”）
    - **data-generating processes**：数据生成过程（简称“DGP”，计量方法验证的核心概念）


# 前门法则

1.  **Bellemare, Marc F.**, Jeffrey R. Bloem, and Noah Wexler (2024), "The Paper of How: Estimating Treatment Effects Using the Front-Door Criterion," *Oxford Bulletin of Economics and Statistics* forthcoming. [Article](https://onlinelibrary.wiley.com/doi/full/10.1111/obes.12598), [Replication Materials](https://marcfbellemare.com/wordpress/wp-content/uploads/2024/01/BellemareBloemWexlerOBESFrontDoorCriterion.zip)



# 为何 y 中包含大量零值的处理

Mullahy, J., & Norton, E. C. (2023). Why TransformY? The Pitfalls of Transformed Regressions with a Mass at Zero*. Oxford Bulletin of Economics and Statistics, 86(2), 417–447. Portico. [Link](https://doi.org/10.1111/obes.12583), [PDF](http://sci-hub.ren/10.1111/obes.12583), [Google](<https://scholar.google.com/scholar?q=Why TransformY? The Pitfalls of Transformed Regressions with a Mass at Zero*. Oxford Bulletin of Economics and Statistics, 86(2), 417–447>).

# Connected Papers：文献梳理神器

- <https://www.connectedpapers.com/>

参考：
- [探索学术前沿：Connected Papers的功能与应用指南](https://baijiahao.baidu.com/s?id=1836654985777448426&wfr=spider&for=pc)

# xtregtwo

- Chiang, H.D., B.E. Hansen, and Y. Sasaki (2024: forthcoming) Standard Errors for Two-Way Clustering with Serially Correlated Time Effects. Review of Economics and Statistics. Paper. [-Link-](https://doi.org/10.1162/rest_a_01306), [PDF](file:///D:/_%E4%B8%8B%E8%BD%BD%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6/StandardErrorsForTwo-WayClusteringW_preview.pdf), [PDF2](https://users.ssc.wisc.edu/~behansen/papers/twoway.pdf), [Google](<https://scholar.google.com/scholar?q=Standard Errors for Two-Way Clustering with Serially Correlated Time Effects>). [Replication-R codes](https://doi.org/10.7910/DVN/ZVSHZE), [Slides](http://econdse.org/wp-content/uploads/Lecture2.pdf)



# UCI 机器学习数据集大全

The UCI Machine Learning Repository

<https://archive.ics.uci.edu/datasets>

# AI如何辅助经济学研究？

根据下文写一篇推文，介绍借助 AI 辅助学生学习经济学研究的方法和优势。

Daniels, G., Kakar, V., Lee, M., & Tombari, L. (2025). Using GenAI Tools to Engage Students with Economics Research. [Link](https://doi.org/10.2139/ssrn.5271856), [Google](<https://scholar.google.com/scholar?q=>). [PDF](https://papers.ssrn.com/sol3/Delivery.cfm/5271856.pdf?abstractid=5271856&mirid=1)

# AI prompt

- <https://sites.google.com/view/lastunen/ai-for-economists>

# AI Agents for Economic Research

- <https://www.aeaweb.org/content/file?id=23290>

# IV-Shock-IV

- Atanasov, V., & Black, B. (2021). The Trouble with Instruments: The Need for Pretreatment Balance in Shock-Based Instrumental Variable Designs. Management Science, 67(2), 1270–1302. [Link](https://doi.org/10.1287/mnsc.2019.3510), [PDF](http://sci-hub.ren/10.1287/mnsc.2019.3510), [-Appendix-](https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2019.3510/suppl_file/mnsc.2019.3510.sm1.pdf), [Google](<https://scholar.google.com/scholar?q=The Trouble with Instruments: The Need for Pretreatment Balance in Shock-Based Instrumental Variable Designs>). 



# darts: Probabilistic Forecasting in Darts

找资料写一排推文，介绍在这个主题

然后使用 `akshare` 包获取沪深 300 指数或上证指数的历史数据，使用 Darts 包中的概率预测模型对该时间序列进行建模和预测，并展示预测结果。

## Introduction

**Darts** is a Python library for user-friendly forecasting and anomaly detection on time series. It contains a variety of models, from classics such as ARIMA to deep neural networks. The forecasting models can all be used in the same way, using `fit()` and `predict()` functions, similar to scikit-learn. The library also makes it easy to backtest models, combine the predictions of several models, and take external data into account. Darts supports both univariate and multivariate time series and models. The ML-based models can be trained on potentially large datasets containing multiple time series, and some of the models offer a rich support for probabilistic forecasting.

Darts also offers extensive anomaly detection capabilities. For instance, it is trivial to apply PyOD models on time series to obtain anomaly scores, or to wrap any of Darts forecasting or filtering models to obtain fully fledged anomaly detection models.

## Documentation

-   [Quickstart](https://unit8co.github.io/darts/quickstart/00-quickstart.html)
-   [User Guide](https://unit8co.github.io/darts/userguide.html)
-   [API Reference](https://unit8co.github.io/darts/generated_api/darts.html)
-   [Examples](https://unit8co.github.io/darts/examples.html)

其它参考资料：
- [Time-Series Forecasting with Darts: A Hands-On Tutorial](https://magnimindacademy.com/blog/time-series-forecasting-with-darts-a-hands-on-tutorial/)

# deeptime 

Hoffmann, M., Scherer, M., Hempel, T., Mardt, A., De Silva, B., Husic, B. E., Klus, S., Wu, H., Kutz, N., Brunton, S. L., & Noé, F. (2021). Deeptime: a Python library for machine learning dynamical models from time series data. ArXiv. [Link](https://doi.org/10.48550/arXiv.2110.15013) (rep), [PDF](https://arxiv.org/pdf/2110.15013.pdf), [Google](<https://scholar.google.com/scholar?q=Deeptime: a Python library for machine learning dynamical models from time series data>). 
- Website: <https://deeptime-ml.github.io/deeptime/>，[-Link2-](https://deeptime-ml.github.io/latest/index.html)
- Github: <https://github.com/deeptime-ml/deeptime>


# 有VaR约束的投资组合优化

Thormann, M.-L., Vuong, P. T., & Zemkoho, A. B. (2024). The Boosted Difference of Convex Functions Algorithm for Value-at-Risk Constrained Portfolio Optimization (Version 2). arXiv. [Link](https://doi.org/10.48550/arXiv.2402.09194) (rep), [PDF](https://arxiv.org/pdf/2402.09194.pdf), [Google](<https://scholar.google.com/scholar?q=The Boosted Difference of Convex Functions Algorithm for Value-at-Risk Constrained Portfolio Optimization (Version 2)>).

- Github: <https://github.com/mlthormann/BDCA-For-Portfolio-Optimization/>

## China Case

使用 `akshare` 包获取中国股票数据，然后用 [Github-BDCA](https://github.com/mlthormann/BDCA-For-Portfolio-Optimization) 中的代码进行优化。

- 张祖冲, 2025, [akshare 与 Python：中国金融数据分析与获取的开源首选工具](https://www.lianxh.cn/details/1642.html).


# 

- Website: <https://pypots.com/>

- [BrewPOTS](https://github.com/WenjieDu/BrewPOTS): The tutorials for PyPOTS, guide you to model partially-observed time series datasets.

![PyPOTS_Ecosystem_Pipeline](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/PyPOTS_Ecosystem_Pipeline.png)


## 子库 - PyGrinder

用于人为产生时间序列数据的缺失值，以便测试各种缺失值处理方法的有效性。

`PyGrinder`: a Python toolkit for grinding data beans into the incomplete for real-world data simulation by introducing missing values with different missingness patterns, including **MCAR** (complete at random), **MAR** (at random), **MNAR** (not at random), sub sequence missing, and block missing

- github: <https://github.com/WenjieDu/PyGrinder>
- website: <https://pypots.com/ecosystem/#PyGrinder>



# Stata 新命令：政策学习
Cerulli, G. (2025). Optimal policy learning using Stata. The Stata Journal, 25(2), 309–343. [Link](https://journals.sagepub.com/doi/10.1177/1536867X251341143), [PDF](https://journals.sagepub.com/doi/pdf/10.1177/1536867X251341143), [Google](<https://scholar.google.com/scholar?q=Optimal policy learning using Stata>).

```stata
net describe st0774, from(http://www.stata-journal.com/software/sj25-2)

net describe http://repec.org/bocode/o/opl_ma
```

# darts: 

![20251104003015](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20251104003015.png)

A python library for user-friendly forecasting and anomaly detection on time series.

- Website: <https://unit8co.github.io/darts/>
- Github: <https://github.com/unit8co/darts>
- <https://unit8.com/resources/darts-time-series-made-easy-in-python/>

Herzen, J., Lässig,, F., Piazzetta, S. G., Neuer, T., Tafti, L., Raille, G., Van Pottelbergh, T., Pasieka, M., Skrodzki, A., Huguenin, N., Dumonal, M., Ko?cisz, J., Bader, D., Gusset, F., Benheddi, M., Williamson, C., Kosinski, M., Petrik, M., & Grosch, G. (2022). Darts: User-Friendly Modern Machine Learning for Time Series. Journal of Machine Learning Research 23 (2022) 1-6. [Link](https://doi.org/10.48550/arXiv.2110.03224) (rep), [PDF](https://arxiv.org/pdf/2110.03224.pdf), [Google](<https://scholar.google.com/scholar?q=Darts: User-Friendly Modern Machine Learning for Time Series>).


# 论文推介和复现：Debacker et al. (2023)-收入分解

Debacker, J., Panousi, V., & Ramnath, S. (2023). A Risky Venture: Income Dynamics among Pass-Through Business Owners. **American Economic Journal**: Macroeconomics, 15(1), 444–474. [Link](https://doi.org/10.1257/mac.20200134) (rep), [PDF](http://sci-hub.ren/10.1257/mac.20200134), [-PDF2-](https://sc.edu/study/colleges_schools/moore/research_and_centers/centers/sc_epic/documents/tax_policy/income_dynamics_among_pass_through_business_owners.pdf), [Appendix](https://www.aeaweb.org/doi/10.1257/mac.20200134.appx), [Google](<https://scholar.google.com/scholar?q=A Risky Venture: Income Dynamics among Pass-Through Business Owners>). [-Replication-](https://www.openicpsr.org/openicpsr/project/156181/version/V1/view).

- 方法：
  - 可视化：时序图，柱状图
  - 统计分析：基本统计量，分类统计
  - Markov 状态转移矩阵 (Table 6)
  - 长期和短期收入分解：Kopczuk, Saez, and Song (2010) (KSS); Gottschalk and Moffitt (1994, GM)
  - 回归分析：固定效应回归，Error Components Model

# 论文推介和复现：Panel Trees

- Cong, L. W., Feng, G., He, J., & He, X. (2025). Growing the efficient frontier on panel trees. Journal of Financial Economics, 167, 104024. [Link](https://doi.org/10.1016/j.jfineco.2025.104024) (rep), [-PDF-](https://doi.org/10.1016/j.jfineco.2025.104024), [PDF2](https://arxiv.org/pdf/2501.16730), [Google](<https://scholar.google.com/scholar?q=Growing the efficient frontier on panel trees>). [-Replication- R 语言](https://data.mendeley.com/datasets/k7d7xmdy4y/2), [作者主页提供的资源](https://www.xinhesean.com/), [Slides](https://jingyuhe.com/files/PTree.pdf)
- Github: <https://github.com/Quantactix/PTree>
- [P-Tree-Public-Data](https://github.com/Quantactix/P-Tree-Public-Data)

# y中包含大量零值的处理

Mullahy, J., & Norton, E. C. (**2023**). Why Transform Y? The Pitfalls of Transformed Regressions with a Mass at Zero. **Oxford Bulletin of Economics and Statistics**, 86(2), 417–447. Portico. [Link](https://doi.org/10.1111/obes.12583), [PDF](http://sci-hub.ren/10.1111/obes.12583), [Google](<https://scholar.google.com/scholar?q=Why TransformY? The Pitfalls of Transformed Regressions with a Mass at Zero*. Oxford Bulletin of Economics and Statistics, 86(2), 417–447>).

# 机器学习中的样本选择问题 (不确定是否合适)

- Brewer, D., & Carlson, A. (2024). Addressing sample selection bias for machine learning methods. Journal of Applied Econometrics, 39(3), 383–400. Portico. [Link](https://doi.org/10.1002/jae.3029) (rep), [PDF](https://onlinelibrary.wiley.com/doi/epdf/10.1002/jae.3029?saml_referrer), [Google](<https://scholar.google.com/scholar?q=Addressing sample selection bias for machine learning methods. Journal of Applied Econometrics, 39(3), 383–400>). [Replication](https://doi.org/10.15456/jae.2023241.1712360697)

## 3.3 | Control function

In the econometrics literature, Heckman (1979) proposes a control function approach to address selection on unobservables in a linear regression framework. For example, let

$$
S_i=1\left\{g\left(X_i, Z_i, \delta\right)+V_i>0\right\},
$$

where $V_i \perp\left(X_i, Z_i\right)$ and $Z_i$ are the instruments, attributes that contribute to the sample selection rule but are irrelevant in the outcome equation. ${ }^{11}$ The control function approach assumes $E\left(U_i \mid X_i, Z_i, S_i=1\right)=E\left(U_i \mid g\left(X_i, Z_i, \delta\right)\right)$, so the conditional mean of the unobserved error conditional on selection can be controlled for through the model for the sample selection process. For example, if ( $U, V$ ) is bivariate normal and independent of the attributes, Heckman (1979) shows

$$
E\left(Y_i \mid X_i, Z_i, S_i=1\right)=f\left(X_i\right)+\rho \lambda\left(g\left(X_i, Z_i, \delta\right)\right)
$$

where $\lambda(\cdot)=\phi(\cdot) / \Phi(\cdot)$ denotes the inverse Mills ratio. He proposes a two-step estimator that first estimates the parameters $\delta$ from the model for the sample selection process, $g\left(X_i, Z_i, \delta\right)$, and second includes $\hat{\lambda}_i=\lambda\left(g\left(X_i, Z_i, \hat{\delta}\right)\right)$ as an additional covariate in a linear regression to remove the bias induced by selection on unobservables.

Ahn and Powell (1993), Das et al. (2003), and Newey (2009) (among others) extend his approach to a distribution-free setting, where they model the conditional mean as

$$
E\left(Y_i \mid X_i, Z_i, S_i=1\right)=f\left(X_i\right)+m\left(g\left(X_i, Z_i, \delta\right)\right)
$$

where $m(\cdot)$ is an unknown function that can be approximated. Let $m^k(\cdot)=\left(m_{1 k}(\cdot), \ldots, m_{k k}(\cdot)\right)$ be a vector of functions increasing in complexity that approximate $m(\cdot)$, such as polynomials or splines. ${ }^{12}$

For the control function approach, the strength of an instrument, $Z_i$, is crucial to recover $f\left(X_i\right)$. For example, if the instrument does not strongly predict selection, that is, $g\left(X_i, Z, \delta\right)=g\left(X_i, Z^{\prime}, \delta\right)$ for $Z \neq Z^{\prime}$ in the support, then $f\left(X_i\right)$ in the second step is not identified (Leung \& Yu, 1996; Puhani, 2000). However, the strength of an instrument can be tested in a first stage.

How to implement a control function for a more general ML algorithm is an open question. We propose two different implementation approaches inspired by two equivalent control function approaches in the linear least squares setting. In both approaches, the parameters $\delta$ from the model for the sample selection process, $g\left(X_i, Z_i, \delta\right)$, are estimated in a first stage.

# 综述

- Arkhangelsky, D., & Imbens, G. (2024). Causal models for longitudinal and panel data: a survey. The Econometrics Journal, 27(3), C1–C61. [Link](https://doi.org//10.1093/ectj/utae014), [PDF](https://watermark02.silverchair.com/utae014.pdf?token=AQECAHi208BE49Ooan9kkhW_Ercy7Dm3ZL_9Cf3qfKAc485ysgAAA08wggNLBgkqhkiG9w0BBwagggM8MIIDOAIBADCCAzEGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMMNZ4o-plFsCKhbM8AgEQgIIDAodBeZZQqzBGy6CylXY7p5-jmPncrwRmTvYiYIOt3w0mmt4wSEFzgjsgEiL5O5nfOE1ZxnGLN0AEY-wc4R1Z_4aIV53nfk2pl5rPUYILxMn7ns42Wew19yw4Co2On57dt63QXxVBtbEDv-NvxS7cFzb4iwYfhaLn-G1jtPFDFWFsR9WvetY_2bnlJpP6UOsJRB2cSb6toBFiDMAY_QiBigB4JE6Pm_iygP8vTJnukJUIFCG_5lx7h1zHzFtXNJzd0PkU-FbgZaCT50vPBIS-yfe0DEWHSPR69U-IDZf8U12EnsnCiVfLBf1OimrXG3ZLZyQkJqZ-OxFLeGQ9HATARvg8dvdF49H8uRnsoClqUgpfEXN-AuFc-CGq5-K0XII-E4m6-BvaRwE9SU1dmUN21yyselULs3MKhFFY5zRedWn5zHlobh01oJg75oSnVQHYnCcfUfB2pv-vmDAA2xbVxWhXdKxnkGTIeLXDgI-9nE0zLUJipGHLgQNgxJOVBUjzJUtGtmzlz6npMVh_I35IglC_XK9jD5VVhSOWAo0M-b2Tj4MWJkCAvbC2WIpkNxcHUd_aW9Y8KnJAfFQBaiviqDEw5sfkt2GNFnIXrvqr0QKKtFoPKAYZdQjH8ZVpdWdGHk9m281FDNhpI5REFug_tIkBPQJcWCEuV7oqyw3qWk_UNzj2ZTOeVpeEpQ-rD1LTbzykdMSKtaMdMWWLu7URGfTL9-vLlC2AicwSiYFwgmofkKMoOrga8ZhiUjKlcwzBoFbMvBSZzYdtG3lqQ3m7iY4EgzGV4kfO34rOWAQtXhAAqKsiJZfp17oby3Xydv-nhHt2Koq064K7FfCAu8Qm1Npgzu3-BjMT_LZ9mwxn5yDMLTFSIpcfFBKbR12QYLbL3jKqWbt602J4aLH6G0tPyAB82VldZhk20PCKka3hZUoO7rQ9-KIf9veyfkgzXCVJbeHOdwpE9VAe4UfjU4kWlyi7wlQ_aluL7CosnGqr5DQhKrHDEq00oE-X8ECyPpNgKXV2), [Google](<https://scholar.google.com/scholar?q=Causal models for longitudinal and panel data: a survey>).


# 伍德里奇用 xtreg 给你演示各种 DID 的估计

https://www.stata.com/meeting/us25/slides/US25_Wooldridge.pdf






# 提供发现代码的中文期刊列表整理

- 如题


# 论文推介 ？？

Hill, A. D., Johnson, S. G., Greco, L. M., O’boyle, E. H., & Walter, S. L. (2020). Endogeneity: A Review and Agenda for the Methodology-Practice Divide Affecting Micro and Macro Research. Journal of Management, 47(1), 105–143. [Link](https://doi.org/10.1177/0149206320960533), [PDF](http://sci-hub.ren/10.1177/0149206320960533), [Google](<https://scholar.google.com/scholar?q=Endogeneity: A Review and Agenda for the Methodology-Practice Divide Affecting Micro and Macro Research>).

#  Lee bound
Lee D S. Training, wages, and sample selection: Estimating sharp bounds on treatment effects[J]. 2005.

# 统计学的挑战：因果关系和因果推断中的十二个挑战

- Cinelli, C., Feller, A., Imbens, G., Kennedy, E., Magliacane, S., & Zubizarreta, J. (2025). Challenges in Statistics: A Dozen Challenges in Causality and Causal Inference (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2508.17099) (rep), [PDF](https://arxiv.org/pdf/2508.17099.pdf), [Google](<https://scholar.google.com/scholar?q=Challenges in Statistics: A Dozen Challenges in Causality and Causal Inference (Version 1)>).

# 论文推介：Li-2007-自选择模型综述

Li, K., and N. R. Prabhala. 2007. “**Self-Selection Models in Corporate Finance**.” In Handbook of Corporate Finance: Empirical Corporate Finance, Vol. 1, edited by B. E. Eckbo, 37–86. Amsterdam: Elsevier/North-Holland. [-Link-](https://doi.org/10.1016/B978-0-444-53265-7.50016-0), [PDF](https://sci-hub.ren/10.1016/B978-0-444-53265-7.50016-0), [PDF-wp](https://mba.tuck.dartmouth.edu/bespeneckbo/cfhandbook/VOLUME_1/CH2-SELECTION/ECKBO-CH2-SELECTION.pdf), [Google](https://scholar.google.com/scholar?hl=zh-CN&as_sdt=0%2C5&q=Self-Selection+Models+in+Corporate+Finance&btnG=)


# 遗漏变量偏误：通俗讲义

Wilms, R., Mäthner, E., Winnen, L., & Lanwehr, R. (2021). Omitted variable bias: A threat to estimating causal relationships. Methods in Psychology, 5, 100075. [Link](https://doi.org/10.1016/j.metip.2021.100075), [PDF](http://sci-hub.ren/10.1016/j.metip.2021.100075), [Google](<https://scholar.google.com/scholar?q=Omitted variable bias: A threat to estimating causal relationships>).

# Generalization in neural networks: A broad survey
Generalization in neural networks: A broad survey
C Rohlfs - Neurocomputing, 2025 - Elsevier
This paper reviews concepts, modeling approaches, and recent findings along a spectrum of
different levels of abstraction of neural network models including generalization across (1) …
保存 引用 被引用次数：30 相关文章 所有 4 个版本 导入EndNote

# 多重联合检验：rwolf和rwolf2命令介绍

## rwolf 命令介绍

- `findit rwolf`, Stata Journal SJ 20(4):812--843
- Clarke, D., J. P. Romano, M. Wolf, **2020**, The romano-wolf multiple-hypothesis correction in stata, **Stata Journal**, 20 (4): 812-843. [-Link-](https://xs2.dailyheadlines.cc/scholar?cites=15688799786589811179&as_sdt=2005&sciodt=0,5&hl=zh-CN), [-PDF1-](https://sci-hub.ren/10.1177/1536867x20976314)
- 应用该方法文章：Serra-Garcia, M., U. Gneezy, **2021**, Mistakes. Overconfidence, and the effect of sharing on detecting lies, **American Economic Review**, 111 (10): 3160-3183. [-Link-DataCodes](https://doi.org/10.1257/aer.20191295), [-PDF1-](https://sci-hub.ren/10.1257/aer.20191295)

## rwolf2 命令介绍

- Clarke, D., 2021. rwolf2 Implementation and Flexible Syntax. [PDF](https://www.damianclarke.net/computation/rwolf2.pdf)

应用：

- Bao, L., Huang, D., & Lin, C. (2025). Can Artificial Intelligence Improve Gender Equality Evidence from a Natural Experiment. Management Science. [Link](https://doi.org/10.1287/mnsc.2022.02787), [PDF-wp](https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/2026-Spring/Bao-2024-MS.pdf), [PDF2-wp](httpspapers.ssrn.comsol3Delivery.cfm4202239.pdfabstractid=4202239&mirid=1), [-Appendix-](https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2022.02787/suppl_file/mnsc.2022.02787.sm1.pdf), [Google](<httpsscholar.google.comscholarq=Can Artificial Intelligence Improve Gender Equality Evidence from a Natural Experiment>), [Replication](https://services.informs.org/dataset/download.php?doi=mnsc.2022.02787).
  - `table_a7.do`
  ```stata
  ** (4) RWOLF **

  cap ssc install rwolf2
  
  local fe_absorb "absorb(month id class teacher)"
  local vce       "vce(cluster id)"
  rwolf2 ///
     (reghdfe quality         treatment, `fe_absorb' `vce') ///
     (reghdfe error           treatment, `fe_absorb' `vce') ///
     (reghdfe criticalerror   treatment, `fe_absorb' `vce') ///
     (reghdfe error_magnitude treatment, `fe_absorb' `vce') ///
     , ///
     indepvars(treatment, treatment, treatment, treatment) ///
     usevalid seed(123) cluster(id) reps(1000)
  ```

# 论文推介：调节效应分析中要不要加平方项/二次项？

Kalnins, A. (2024). Should Moderated Regressions Include or Exclude Quadratic Terms? Present Both! Then Apply Our Linear Algebraic Analysis to Identify the Preferable Specification. Organizational Research Methods, 27(1), 29–63. [Link](https://doi.org/10.1177/10944281221124945), [PDF](https://journals.sagepub.com/doi/epub/10.1177/10944281221124945), [Google](<https://scholar.google.com/scholar?q=Should Moderated Regressions Include or Exclude Quadratic Terms? Present Both! Then Apply Our Linear Algebraic Analysis to Identify the Preferable Specification>).

- 组织研究越来越多地使用包含交互项的多元回归来检验调节关系。大多数研究在进行此类检验时很少关注曲线关系。但方法论专家已经证实，忽略相关主变量的二次项可能会导致假阳性交互作用（I类错误）。如果因变量是由典型过程生成的，且完全指定的回归满足高斯-马尔可夫假设，那么包含二次项可以解决问题。但我们对已发表的组织研究的实证分析表明，因变量通常是由这样的过程生成的：即使包含二次项，回归分析仍然不符合高斯-马尔可夫假设。在这种情况下，我们的线性代数分析表明，包含二次项——即使是出于令人信服的理论动机——也可能加剧而非减轻假阳性交互作用的发生。一旦包含二次项，交互系数的大小可能会发生显著变化，甚至符号也会改变，而且这种改变未必是朝着好的方向发展。我们鼓励研究人员在检验调节假设时提供两组完整的结果——一组包含二次项，另一组不包含二次项。研究人员随后应回答本文提出的五个问题，以确定最佳结果集。

# 论文推介：VIF没啥用！

- 备选标题：别再盯着 VIF 了！没用

Kalnins, A., & Praitis Hill, K. (2025). The VIF Score. What is it Good For? Absolutely Nothing. Organizational Research Methods, 28(1), 58–75. [Link](https://doi.org/10.1177/10944281231216381), [PDF](http://sci-hub.ren/10.1177/10944281231216381), [Google](<https://scholar.google.com/scholar?q=The VIF Score. What is it Good For? Absolutely Nothing>). [-cited-](https://scholar.google.com/scholar?cites=4321578306216416681&as_sdt=2005&sciodt=0,5&hl=zh-CN), [YouTube](https://www.youtube.com/watch?v=6FmHfyeTZTc) 

- 方差膨胀因子（VIF）是社会科学领域常用的回归诊断指标。研究人员通常认为，VIF 值低于某个经验法则阈值就如同“灵丹妙药”，可以彻底消除多重共线性问题。然而，使用 VIF 阈值来排除多重共线性导致的 I 类错误的可能性，并没有合理的逻辑依据。报告低于阈值的 VIF 值并不会提高相关变量间统计显著性结果的可信度。与这种“阈值视角”相反，我们的分析扩展了对多重共线性和模型设定错误的考量。我们通过分析证明，如果回归模型中省略了与存在多重共线性的变量相关的变量，则该模型容易受到内生性导致的偏差膨胀和 beta 极化的影响，从而可能出现 I 类错误和低 VIF 值并存的情况。此外，省略变量会显著降低 VIF 值。我们得出结论，阈值视角不仅缺乏任何逻辑基础，而且作为经验法则也具有根本性的误导性。工具变量是解决内生性导致的偏差膨胀的有效方法之一。如果无法使用外生工具变量，我们建议研究人员在使用存在多重共线性的变量时，仅检验简单明了的理论，并确保相关的协变量具有预期的符号。

![20251203175641](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20251203175641.png)

# mhtreg：multiple hypothesis testing controlling for FWER

```stata
ssc install mhtreg
``` 

应用：

- Bao, L., Huang, D., & Lin, C. (2024). Can Artificial Intelligence Improve Gender Equality Evidence from a Natural Experiment. Management Science. [Link](httpsdoi.org10.1287mnsc.2022.02787), [PDF](httpspapers.ssrn.comsol3Delivery.cfm4202239.pdfabstractid=4202239&mirid=1), [-Appendix-](https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2022.02787/suppl_file/mnsc.2022.02787.sm1.pdf), [Google](httpsscholar.google.comscholarq=Can Artificial Intelligence Improve Gender Equality Evidence from a Natural Experiment). [Replication]().

```stata
*-Table_a7.do

** (2) MHTREG **

cap ssc install mhtreg

#delimit ;
mhtreg (quality treatment i.month i.id i.class i.teacher)
       (error treatment i.month i.id i.class i.teacher)
       (criticalerror treatment i.month i.id i.class i.teacher)
       (error_magnitude treatment i.month i.id i.class i.teacher)
       , 
       seed(123) cluster(id) bootstrap(1000);
#delimit cr
```



# 遗漏变量偏误检验 - Oster (2019) - 

Acheampong, A. O., & Said, R. (2024). Financial inclusion and the global net-zero emissions agenda: Does governance quality matter? Energy Economics, 137, 107785. [Link](https://doi.org/10.1016/j.eneco.2024.107785) (rep), [PDF](http://sci-hub.ren/10.1016/j.eneco.2024.107785), [Google](<https://scholar.google.com/scholar?q=Financial inclusion and the global net-zero emissions agenda: Does governance quality matter>). [Replication](https://ars.els-cdn.com/content/image/1-s2.0-S0140988324004936-mmc1.zip) 

![20251203163843](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20251203163843.png)

![20251203164432](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20251203164432.png)

## 参考文献

理论依据
- Oster, E. (**2019**). Unobservable Selection and Coefficient Stability: Theory and Evidence. **Journal of Business & Economic Statistics**, 37(2), 187–204. [Link](https://doi.org/10.1080/07350015.2016.1227711), [PDF](http://sci-hub.ren/10.1080/07350015.2016.1227711), [Google](<https://scholar.google.com/scholar?q=Unobservable Selection and Coefficient Stability: Theory and Evidence>). [-cited-5000次](https://scholar.google.com/scholar?cites=11936978270607540916&as_sdt=2005&sciodt=0,5&hl=zh-CN), [github-`coefstability`](https://github.com/gratzt/Coef-Stability-Oster)

## 其它应用

- Cepni, O., Şensoy, A., & Yılmaz, M. H. (2024). Climate change exposure and cost of equity. Energy Economics, 130, 107288. [Link](https://doi.org/10.1016/j.eneco.2023.107288) (rep), [PDF](https://file-lianxh.oss-cn-shenzhen.aliyuncs.com/Refs/2026-Spring/Cepni_2024_Climate_change_exposure_and_cost_of_equity.pdf), [Google](<https://scholar.google.com/scholar?q=Climate change exposure and cost of equity>). [Replication](https://ars.els-cdn.com/content/image/1-s2.0-S0140988323007867-mmc1.zip)
- Bao, L., Huang, D., & Lin, C. (2024). Can Artificial Intelligence Improve Gender Equality? Evidence from a Natural Experiment. Management Science. [Link](https://doi.org/10.1287/mnsc.2022.02787), [PDF](http://sci-hub.ren/10.1287/mnsc.2022.02787), [Google](<https://scholar.google.com/scholar?q=Can Artificial Intelligence Improve Gender Equality? Evidence from a Natural Experiment>).


# Google Scholar 实验室：高级搜索技巧

- <https://scholar.google.com/scholar_labs/search>




# 与论文复现说明文档相关的一些模板和话术

Unofficial guidance on various topics by Social Science Data Editors

- <https://social-science-data-editors.github.io/guidance/>

点击某个专题后，发现里面有很多话术模板，可以直接复制粘贴使用。

# 论文复现文档的 Readme 模板

- [A template README for social science replication packages](https://social-science-data-editors.github.io/template_README/)
  - [下载链接](https://zenodo.org/records/7293838)

例子：下文的 reademe.html 文档写的比较规范：

Wang, Z., Zhang, T., Ren, X., & Shi, Y. (2024). AI adoption rate and corporate green innovation efficiency: Evidence from Chinese energy companies. Energy Economics, 132, 107499. [Link](https://doi.org/10.1016/j.eneco.2024.107499), [Google](<https://scholar.google.com/scholar?q=AI adoption rate and corporate green innovation efficiency: Evidence from Chinese energy companies>), [-cited-](https://scholar.google.com/scholar?cites=3084301341760475150&as_sdt=2005&sciodt=0,5&hl=zh-CN), [Replication](https://ars.els-cdn.com/content/image/1-s2.0-S014098832400207X-mmc1.zip)

# 论文复现文档检查清单

先介绍一般原则，再列举 5-10 本重要期刊的 Checklist 链接。


## 一般性原则：DCAS

[DCAS](https://datacodestandard.org/) is a standard for sharing research code and data, endorsed by [leading journals](https://datacodestandard.org/journals) in social sciences. It is maintained by the [Social Science Data Editors](https://social-science-data-editors.github.io/).

Koren, M., M. Connolly, J. Llull, and L. Vilhuber. 2022. “Data and Code Availability Standard [Version 1.0].” Website. https://datacodestandard.org https://doi.org/10.5281/zenodo.7436134

- [Data and Code Availability Standard](https://datacodestandard.org/)
- [Social Science Data Editors: Improving the reproducibility of social sciences](https://github.com/social-science-data-editors)



### Journals

The following journals endorse the Data and Code Availability Standard.

1.  [American Economic Journal: Applied Economics](https://www.aeaweb.org/journals/data/data-code-policy)  
2.  [American Economic Journal: Economic Policy](https://www.aeaweb.org/journals/data/data-code-policy)  
3.  [American Economic Journal: Macroeconomics](https://www.aeaweb.org/journals/data/data-code-policy)  
4.  [American Economic Journal: Microeconomics](https://www.aeaweb.org/journals/data/data-code-policy)  
5.  [American Economic Review](https://www.aeaweb.org/journals/data/data-code-policy)  
6.  [American Economic Review: Insights](https://www.aeaweb.org/journals/data/data-code-policy)  
7.  [Canadian Journal of Economics](https://www.economics.ca/cje-journal-policies) 
8.  [Econometrica](https://www.econometricsociety.org/publications/es-data-editor-website) 
9.  [Econometrics Journal](https://res.org.uk/replication-policy/)
10.  [Economic Inquiry](https://weai.org/view/EI-Journal-Policies) 
11.  [Economic Journal](https://academic.oup.com/ej/pages/General_Instructions#data) 
12.  [Journal of Economic Literature](https://www.aeaweb.org/journals/data/data-code-policy)  
13.  [Journal of Economic Perspectives](https://www.aeaweb.org/journals/data/data-code-policy)  
14.  [Journal of Political Economy](https://jpedataeditor.github.io/policy) 
15.  [Journal of the European Economic Association](https://academic.oup.com/jeea/pages/Author_Guidelines#Supplementary%20Material%20and%20Data) 
16.  [Quantitative Economics](https://www.econometricsociety.org/publications/es-data-editor-website) 
17.  [Review of Economic Studies](https://restud.github.io/data-editor/before/#data-availability-policy) 
18.  [Review of Financial Studies](https://review-of-financial-studies.github.io/) 
19.  [Theoretical Economics](https://www.econometricsociety.org/publications/es-data-editor-website) 

Individual journal policies may differ slightly. To ensure full compliance, check the policies and submission guidelines of the journal.

## 一些期刊的 Checklist 链接
- Dataverse: Replication Dataset Guidelines
  - <https://dataverse.org/best-practices/replication-dataset> 
- MS: CODE AND DATA REPLICATION PACKAGE CHECKLIST
  - <https://pubsonline.informs.org/pb-assets/MNSC-replication-package-checklist-5-16-2024.pdf>
  - [Code and Data Disclosure Policy](https://pubsonline.informs.org/page/mnsc/code-and-data-disclosure-policy) 
- Econometric Societ: Checklist for replication packages
  - <https://www.econometricsociety.org/uploads/reports%20Editorial/ES_Data_Editor_Website/Checklist.pdf>
- Political Analysis Replication Guidelines
  - [PDF](https://www.cambridge.org/core/services/aop-file-manager/file/678f5f7189ee789cdb3a1df2/replication-guidelines-2025-v1.pdf)
- RFS: Code and Data Sharing Policy
  - <https://sfs.org/review-of-financial-studies/code-sharing-policy/>
- Journal of Urban Economics: Mandatory Replication Policy
  - [-Link-](https://www.sciencedirect.com/journal/journal-of-urban-economics/about/policies-and-guidelines/mandatory-replication-policy-journal-of-urban-economics)

# 论文推介：工具变量的敏感性分析

Cinelli, C., & Hazlett, C. (2025). An omitted variable bias framework for sensitivity analysis of instrumental variables. Biometrika, 112(2). [Link](https://doi.org/10.1093/biomet/asaf004), [PDF](http://sci-hub.ren/10.1093/biomet/asaf004), [PDF2](https://carloscinelli.com/files/Cinelli%20and%20Hazlett%20-%20OVB%20for%20IV.pdf), [Google](<https://scholar.google.com/scholar?q=An omitted variable bias framework for sensitivity analysis of instrumental variables>), [github](https://github.com/carloscinelli/iv.sensemakr) (提供了 R codes 和范例), [github-python codes](https://github.com/nlapier2/PySensemakr), [sensemakr-主页](https://github.com/carloscinelli/sensemakr)
  - The [Supplementary Material](https://oup.silverchair-cdn.com/oup/backfile/Content_public/Journal/biomet/112/2/10.1093_biomet_asaf004/4/asaf004_supplementary_data.pdf?Expires=1765934793&Signature=0r2~2LgMG5~ebGE3QDEHdM8Qx9jABKiFUUYK~2PtQD0SfHI8rDjwTGxvjNPnKwkZA2Sw68fUEiV7jmdW4fYHT3BJNZ~reLApfQADXsw0HiXo~us-wYJtv0qTQ18KSLdVs1agXpSEqHgjpjDsk-NOACUlTaEKSQ2RBzKnYCChaqfh7IEFNT7-jOIN4X-yC2Xvy73fYyDY3WMyaPMVZYQEPqCkbPRrMkwcX-Q4B64asRM6cxvNaS4LuL9BuPmROZyT15VWdkjRX4gcBDPPgfzRoSb5Uphgx4s57qkM7OU~b75MxpcO02gpUhjOnGoBJGebVNA44cMr6miUVyuT4Yj37w__&Key-Pair-Id=APKAIE5G5CRDK6RD3PGA) includes proofs of all the results, a comparison between our proposal and alternative approaches, and additional analyses of the empirical example.

参考推文：
- 邹恬华, 2021, [遗漏变量？敏感性分析！新命令sensemakr](https://www.lianxh.cn/details/621.html).

![20251130125623](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20251130125623.png)

# 论文推介：AER

Deaner, B. (2025). The Trade-Off between Flexibility and Robustness in Instrumental Variables Analysis. American Economic Review, 115(11), 3975–3998. [Link](https://doi.org/10.1257/aer.20231765) (rep), [PDF](http://sci-hub.ren/10.1257/aer.20231765), [Appendix](https://www.aeaweb.org/doi/10.1257/aer.20231765.appx), [Google](<https://scholar.google.com/scholar?q=The Trade-Off between Flexibility and Robustness in Instrumental Variables Analysis>), [Replication](https://www.openicpsr.org/openicpsr/project/220201/version/V1/view).


# VScode插件系列：Markdown All in One

# VScode插件系列：Markdown Paste

- `Ctrl + Shift + V` 快捷键可以将剪贴板中的内容粘贴为 Markdown 格式;

# VScode插件系列：markdown-formatter

- <https://github.com/sumnow/markdown-formatter/blob/HEAD/README_CN.md>

### 格式化部分

#### 标点符号

-   `，,。;；！、？：` 这些符号后添加一个空格;
-   `，：；！""''（）？。` , 转换为半角符(可选);
-   支持根据上下文将中文后的符号转换为全角符号, 或者将英文后的转化为半角符;
-   `.!?` 后如果是大写的英文字母或者中文会添加一个空格;
-   反逗号前后空一格, 反逗号内的内容不会被格式化;

#### 空行

-   标题上下空出一行;
-   代码块上下空出一行;
-   为引用上下空出一行;
-   相邻的空行合并;

# DDML-heckman

Bia, M., Huber, M., & Lafférs, L. (2024). Double Machine Learning for Sample Selection Models. Journal of Business & Economic Statistics, 42(3), 958–969. [Link](https://doi.org/10.1080/07350015.2023.2271071), [PDF](http://sci-hub.ren/10.1080/07350015.2023.2271071), [Google](<https://scholar.google.com/scholar?q=Double Machine Learning for Sample Selection Models>). [-Replication-R+Stata codes](https://www.tandfonline.com/doi/suppl/10.1080/07350015.2023.2271071?scroll=top) 


# 书籍推荐
pml-book: "Probabilistic Machine Learning" - a book series by Kevin Murphy

- https://probml.github.io/pml-book/
- github: <https://github.com/probml/pyprobml>

# 

- ABSTRACT: The ongoing revolution in artificial intelligence, especially deep learning, is transforming research across many fields, including economics. Its impact is particularly strong in solving equilibrium economic models. These models often lack closed-form solutions, so economists have relied on numerical methods such as value function iteration, perturbation, and projection techniques. While powerful, these approaches face the curse of dimensionality, making global solutions computationally infeasible as the number of state variables increases. Recent advances in deep learning offer a new paradigm: flexible tools that efficiently approximate complex functions, manage high-dimensional problems, and expand the reach of quantitative economics. After introducing the basic concepts of deep learning, I illustrate the approach with the neoclassical growth model and discuss related ideas, including the double descent phenomenon and implicit regularization.


# Chetty-因果推断中的中介分析

- 2025, Methods Lecture, Raj Chetty and Kosuke Imai, "Uncovering Causal Mechanisms: Mediation Analysis and Surrogate Indices", [-Link-](https://www.nber.org/research/videos/2025-methods-lecture-raj-chetty-and-kosuke-imai-uncovering-causal-mechanisms-mediation-analysis-and)
  
  - Slides: <https://conference.nber.org/confer/2025/SI2025/chetty.pdf>
  - 视频：<https://youtu.be/x03aH6G7U9U>


# GenAI in Finance 综述

Lee, D. K. C., Guan, C., Yu, Y., & Ding, Q. (2024). A Comprehensive Review of Generative AI in Finance. FinTech, 3(3), 460–478. [Link](https://doi.org/10.3390/fintech3030025), [PDF](https://www.mdpi.com/2674-1032/3/3/25/pdf?version=1726817835), [Google](<https://scholar.google.com/scholar?q=A Comprehensive Review of Generative AI in Finance>).


# B270-论文推介：IV-你有麻烦了！DID中的用外生冲击做IV可行吗？

Atanasov, V., B. Black, **2021**, The trouble with instruments: The need for pretreatment balance in shock-based instrumental variable designs, **Management Science**, 67 (2): 1270-1302. [-Link-](https://doi.org/10.1287/mnsc.2019.3510), [-PDF1-](https://sci-hub.ren/10.1287/mnsc.2019.3510), [-Appendix-](https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2019.3510/suppl_file/mnsc.2019.3510.sm1.pdf)

- 作者提供的 [-Appendix-](https://pubsonline.informs.org/doi/suppl/10.1287/mnsc.2019.3510/suppl_file/mnsc.2019.3510.sm1.pdf) 中给出了很多实操建议，可以放在推文中。

- **Abstract** Credible causal inference in accounting and finance research often comes from natural experiments. These experiments can be exploited using several shock-based research designs, including difference in differences (DID), shock-based instrumental variable (shock-IV), and regression discontinuity. We study here shock-IV designs using panel data. We identify all shock-IV papers in two broad data sets and reexamine three of the apparently strongest papers—Desai and Dharmapala [Desai M, Dharmapala D (2009) Corporate tax avoidance and firm value. Rev. Econom. Statist. 91:537–546.], Duchin et al. [Duchin R, Matsusaka J, Ozbas O (2010) When are outside directors effective? J. Financial Econom. 95:195–214.], and Iliev [Iliev P (2010) The effect of SOX Section 404: Costs, earnings quality, and stock prices. J. Finance 65:1163–1196.]. After we enforce covariate balance and common support for treated and control firms, the instruments in all three papers are unusable—they are no longer significant in the first stage. All three papers also show nonparallel pretreatment trends on outcomes or core covariates. The problems with these papers generalize to our full sample and to other papers exploiting the same shocks as Duchin et al. A core conclusion of our reexamination is that pretreatment balance (common support, covariate balance, and parallel pretreatment trends) is necessary for credible shock-IV designs. We provide a good-practice checklist for shock-IV design with panel data, much of which also applies to DID designs.

# B571-tscb: 两阶段聚类自抽样估计量

- Title: the two-stage cluster bootstrap estimator
- Keywords: two-stage cluster bootstrap, ATE, sampling uncertainty, design-based uncertainty
- Github: <https://github.com/Daniel-Pailanir/TSCB-CCV>

详情介绍：https://github.com/Daniel-Pailanir/TSCB-CCV . 可以在此基础上翻译后进行适当补充即可。 

## 简介

`tscb` 命令用于实现 two-stage cluster bootstrap (TSCB) 估计量。有关该估计量的详情参见 Abadie et al., ("When Should You Adjust Standard Errors for Clustering?", QJE, 2023).  

The TSCB estimator allows for the calculation of standard errors and confidence
intervals for average treatment effects in both OLS and fixed effect regressions which account for both sampling uncertainty, and design-based uncertainty.  This bootstrap-based estimator can be more efficient than the standard cluster-robust variance estimator, particularly when the number of samples clustered approaches the total number of clusters in a population.

tscb implements the Two-Stage Cluster Bootstrap Estimator (TSCB), a bootstrap variance estimator proposed by Abadie et al. (2023), for models where average treated effects are desired, and where standard error estimates need to account for clustering. The TSCB is a variance estimate which considers both the standard sampling component which induces variance in estimated regression coefficients, but also incorporates a design-based component, accounting for variability in estimates owing to treatment assignment mechanisms. When the data which is used to estimate treatment effects includes an important proportion of clusters in the full population, standard cluster-robust standard errors can be significantly inflated, and the CCV produces a correction for this.

This procedure assumes that some depvar should be regressed on some treatment variable, and the estimand of interest is the average treatment effect. The population is assumed partitioned into clusters, indicated by groupvar. By default, tscb is based on a standard linear regression of depvar on groupvar, though regressions also including groupvar fixed effects can be requested if desired.

## 理论基础

参见 
- https://github.com/Daniel-Pailanir/TSCB-CCV
- Abadie, A., Athey, S., Imbens, G. W., & Wooldridge, J. M. (2022). When Should You Adjust Standard Errors for Clustering? The Quarterly Journal of Economics, 138(1), 1–35. [Link](https://doi.org/10.1093/qje/qjac038) (rep), [PDF](http://sci-hub.ren/10.1093/qje/qjac038), [-PDF2-](), [Google](<https://scholar.google.com/scholar?q=When Should You Adjust Standard Errors for Clustering>), [-Replication-](https://doi.org/10.7910/DVN/27VMOT) 

## 安装
该命令yilaiyu外部命令 `matamore`，需要预先安装：
```stata
ssc install matamore, replace

ssc isntall tscb, replace 
```

## Stata 实操

## 参考文献
- Abadie Alberto, Athey Susan, Imbens Guido W., Wooldridge Jeffrey M., “Replication Data for: ‘When Should You Adjust Standard Errors for Clustering?’,” (2022), Harvard Dataverse. https://doi.org/10.7910/DVN/27VMOT.


# Google 浏览器插件：arXiv Copilot

# alphaxiv.org - Understand Research Papers

- https://www.alphaxiv.org/?subcategories=econometrics

概述
The official browser extension for alphaXiv.

Understand papers in minutes - not hours. For any PDF or research paper (arXiv, bioRxiv, etc.) you can:

- Seamlessly chat with AI directly on top of the document. Highlight any section of the paper and "@" other papers to quickly add context and compare results, benchmarks, etc.

- Generate beautiful research blogs with figures, key insights, and clear explanations from the paper with just one click. Read in multiple languages.

- Bookmark to save and read later. BibTex citations automatically generated.

# DID_Handbook

- https://github.com/IanHo2019/DID_Handbook
- 根据上述网址的内容整理各种 DID 方法的 Stata 代码
- 配上每种方法对应的文献，以及连享会往期相关推文 (可以使用 `lianxh DID, md` 命令查询。)

# 空间处理效应的因果推断-R实现
Pollmann, M. (2023). Causal Inference for Spatial Treatments (Version 2). arXiv. [Link](https://doi.org/10.48550/arXiv.2011.00373) (rep), [PDF](https://arxiv.org/pdf/2011.00373.pdf), [Google](<https://scholar.google.com/scholar?q=Causal Inference for Spatial Treatments (Version 2)>).
- https://github.com/michaelpollmann/spatialTreat-example

# 内生性应对方法：文献依据

Hill, A. D., Johnson, S. G., Greco, L. M., O’boyle, E. H., & Walter, S. L. (2020). Endogeneity: A Review and Agenda for the Methodology-Practice Divide Affecting Micro and Macro Research. Journal of Management, 47(1), 105–143. [Link](https://doi.org/10.1177/0149206320960533), [PDF](http://sci-hub.ren/10.1177/0149206320960533), [Google](<https://scholar.google.com/scholar?q=Endogeneity: A Review and Agenda for the Methodology-Practice Divide Affecting Micro and Macro Research>).

- Table 5 进行了文献总结



# sivreg：带有部分无效工具变量的 Lasso 工具变量估计

Windmeijer, F., Farbmacher, H., Davies, N., & Davey Smith, G. (2019). On the Use of the Lasso for Instrumental Variables Estimation with Some Invalid Instruments. Journal of the American Statistical Association, 114(527), 1339–1350. [Link](https://doi.org/10.1080/01621459.2018.1498346), [PDF](http://sci-hub.ren/10.1080/01621459.2018.1498346), [Google](<https://scholar.google.com/scholar?q=On the Use of the Lasso for Instrumental Variables Estimation with Some Invalid Instruments>).

- github: <https://github.com/farbmacher/sivreg>


```stata
net install github, from("https://haghish.github.io/github/")

github install farbmacher/sivreg
```







# B896：向量嵌入：机器学习中的核心技术

**任务**：

写一篇推文，介绍向量嵌入的基本概念、原理及其在机器学习中的应用场景。推文内容应包括以下几个方面：

- 什么是向量嵌入？
- ……
- ……

## 参考资料

- [Vector Embeddings Explained](https://opencv.org/blog/vector-embeddings/)

- 我用 AI 生成的一些推文资料，可以用于写作
  - [ChatGPT 对话](https://chatgpt.com/share/68640f38-2038-8005-9956-f6d1268d51a0)，我已经让 AI 生成了一些基本的文本，可以直接用于推文写作
  - [豆包写的](https://www.doubao.com/thread/wb1db3cecd9776070)
  
- 其它资料
  - [What are Vector Embeddings](https://www.pinecone.io/learn/vector-embeddings/)，图片可以引用
  - [什么是机器学习中的嵌入？](https://aws.amazon.com/what-is/embeddings-in-machine-learning/)
  - [Vector Embeddings for Developers: The Basics](https://www.pinecone.io/learn/vector-embeddings-for-developers/)，基础知识讲的比较清楚
  - [What are vector embeddings? A complete guide [2025]](https://www.meilisearch.com/blog/what-are-vector-embeddings)
  - [Multi-vector embeddings (ColBERT, ColPali, etc.)](https://weaviate.io/developers/weaviate/tutorials/multi-vector-embeddings)





# DDML简介-写得非常易懂

翻译，适当补充。

- [Lab 2: Estimating causal effects using double machine learning](https://ml-in-econ.appspot.com/lab2.htmlhttps://ml-in-econ.appspot.com/lab2.html)


# Bootstrap 趣味图解

基于如下内容，结合自己查询的其他资料，写一篇推文，介绍 Bootstrap 的基本原理和应用场景。

- [Bootstrap Animations](https://www.stat.auckland.ac.nz/~wild/BootAnim/)

![bootstrap1](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/bootstrap1.gif)



# openCV 平台介绍

[opencv.org](https://opencv.org/ "https://opencv.org")
- [github](https://github.com/opencv/opencv)
- [tutorial](https://docs.opencv.org/4.x/d9/df8/tutorial_root.html)


# Stata 新命令：attcic

`attcic` implements the CiC attrition corrections proposed in Ghanem et al. (J of Econometrics, 2024). These corrections exploit baseline outcome data to recover the ATT-R, ATE-R, and ATE, and can be applied to randomized experiments as well as quasi-experimental difference-in-difference designs. In addition to these corrections, `attcic` also reports the results of comparator approaches such as the IPW corrections, Manski bounds, and Lee bounds.

Ghanem, D., Hirshleifer, S., Kédagni, D., Ortiz-Becerra, K. (2024b). Correcting Attrition Bias using Changes-in-Changes. Journal of Econometrics.


# Stata 新命令：xttacce 

- Time Averaged Common Correlated Effects estimator (TACCE) for fixed-N panel data and SUR
- `ssc install xttacce, replace`
- ``
- Westerlund, J., Kaddoura, Y., & Karavias, Y. (2025). Time Averaged CCE. [Link](https://doi.org/10.2139/ssrn.5274776), [Google](<https://scholar.google.com/scholar?q=>).


# 论文推介：引力模型-估计方法和实操建议

Larch, M., Shikher, S., & Yotov, Y. V. (2025). Estimating Gravity Equations: Theory Implications, Econometric Developments, and?Practical Recommendations. Review of International Economics. Portico. [Link](https://doi.org/10.1111/roie.12789), [PDF](https://onlinelibrary.wiley.com/doi/epdf/10.1111/roie.12789), [Google](<https://scholar.google.com/scholar?q=Estimating Gravity Equations: Theory Implications, Econometric Developments, and?Practical Recommendations. Review of International Economics>).




# pyfixest-Python包：检验TWFE是否导致了严重的偏误

Lal, A. (2025). When can we get away with using the two-way fixed effects regression? (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2503.05125) (rep), [PDF](https://arxiv.org/pdf/2503.05125.pdf), [Google](<https://scholar.google.com/scholar?q=When can we get away with using the two-way fixed effects regression? (Version 1)>), [github](https://github.com/apoorvalal/TestingInEventStudies), [pyfixest](https://github.com/py-econometrics/pyfixest).

The use of the two-way fixed effects regression in empirical social science was historically motivated by folk wisdom that it uncovers the Average Treatment effect on the Treated (ATT) as in the canonical two-period two-group case. This belief has come under scrutiny recently due to recent results in applied econometrics showing that it fails to uncover meaningful averages of heterogeneous treatment effects in the presence of effect heterogeneity over time and across adoption cohorts, and several heterogeneity-robust alternatives have been proposed. However, these estimators often have higher variance and are therefore under-powered for many applications, which poses a bias-variance tradeoff that is challenging for researchers to navigate. In this paper, we propose simple tests of linear restrictions that can be used to test for differences in dynamic treatment effects over cohorts, which allows us to test for when the two-way fixed effects regression is likely to yield biased estimates of the ATT. These tests are implemented as methods in the `pyfixest` python library.




# 论文推介：揭开 Local Projections 的黑箱

Coulombe, P. G., & Klieber, K. (2025). Opening the Black Box of Local Projections (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2505.12422) (rep), [PDF](https://arxiv.org/pdf/2505.12422.pdf), [Google](<https://scholar.google.com/scholar?q=Opening the Black Box of Local Projections (Version 1)>). [R codes](https://github.com/philgoucou/LPdecomposition), [Slides](https://static1.squarespace.com/static/5f4fc8d353469c7584b4f560/t/68124474927e6f6774afac60/1746027643504/DualLP+%288%29.pdf)

## 简介

𝐎𝐩𝐞𝐧𝐢𝐧𝐠 𝐭𝐡𝐞 𝐁𝐥𝐚𝐜𝐤 𝐁𝐨𝐱 𝐨𝐟 𝐋𝐨𝐜𝐚𝐥 𝐏𝐫𝐨𝐣𝐞𝐜𝐭𝐢𝐨𝐧𝐬 is my new working paper with [Karin Klieber](https://www.linkedin.com/in/ACoAACf2uhgB0eGNrJA4fH3JrvYyilga7qroOt0). (paper: <https://lnkd.in/e8Z29EeJ>, deck: <https://lnkd.in/eGEUCJsr>).

Local projections are now routinely used to estimate impulse response functions (IRFs) in empirical macroeconomics. Yet in many ways, they are black boxes. The mechanisms behind the curves are often unclear. Perhaps most importantly: do the episodes we think are driving the causal effect estimates actually 𝘥𝘰 𝘴𝘰? Are those numerous enough to be confident about external validity?

We introduce a 𝗻𝗲𝘄 𝗱𝗲𝗰𝗼𝗺𝗽𝗼𝘀𝗶𝘁𝗶𝗼𝗻 of LP estimates that makes their historical foundation transparent. Each estimate is expressed as a sum of contributions from individual events---weights times observed responses---revealing how specific periods shape the average effect. We plot cumulative contributions over time, which converge by construction to the LP estimate at horizon 𝘩 (see figure below). We also visualize the weights as a time series and introduce LP concentration statistics to summarize how broad or narrow the evidence base is.

𝗧𝗵𝗲 𝗺𝗲𝗮𝗻𝗶𝗻𝗴(𝘀) 𝗼𝗳 𝘄𝗲𝗶𝗴𝗵𝘁𝘀. In linear local projections estimated via least squares, the weight series admits two interpretations. First, by a variation of the Frisch-Waugh-Lovell theorem, the weights can be viewed as purified and standardized shocks. Second, they are proximity scores, measuring the similarity between the projected intervention and past interventions in the sample.

𝗠𝗮𝗰𝗵𝗶𝗻𝗲 𝗟𝗲𝗮𝗿𝗻𝗶𝗻𝗴. The proximity-based interpretation of weights extends beyond linear models, as many machine learning (ML) algorithms generate IRFs that, while nonlinear in regressors, remain linear in the outcome variable. Proximity weights offer a common scale for comparing linear and ML-based LPs.

𝗘𝗺𝗽𝗶𝗿𝗶𝗰𝗮𝗹𝗹𝘆, we apply the method to various domains:

▶ 𝘔𝘰𝘯𝘦𝘵𝘢𝘳𝘺 𝘱𝘰𝘭𝘪𝘤𝘺: We find that Cholesky VAR shocks produce a price puzzle by misreading stagflation episodes from the 1970s. Romer and Romer (2004) shocks get the IRF sign right by offsetting this misinterpretation with a long stretch of monetary loosening shocks coinciding with the peak of late 1970s inflation. Random Forest refines the portrait by assigning elevated proximity weights only to well-known episodes of political interference with the Fed.

▶ 𝘍𝘪𝘴𝘤𝘢𝘭 𝘱𝘰𝘭𝘪𝘤𝘺: Ramey and Zubairy's (2018) state-dependent fiscal multipliers in recessions are driven almost entirely by a single event: World War II.

▶ 𝘊𝘭𝘪𝘮𝘢𝘵𝘦 𝘴𝘩𝘰𝘤𝘬𝘴: The long-run GDP impact of global temperature shocks in Bilal and Känzig (2024) appears fragile, primarily driven by the pairing of a single 1960s volcanic eruption and exceptional post-war growth.

![](https://fig-lianxh.oss-cn-shenzhen.aliyuncs.com/20250719180429.png)



# 论文复现-Stata：LP 的统计推断

- Inoue, A., Jordà, ò., & Kuersteiner, G. M. (2025). Inference for local projections. The Econometrics Journal. [Link](https://doi.org/10.1093/ectj/utaf004), [PDF](http://sci-hub.ren/10.1093/ectj/utaf004), [Google](<https://scholar.google.com/scholar?q=Inference for local projections>). [github-Stata codes](https://github.com/ojorda/Econometrics-Journal), [Slides](https://www.jamelsaadaoui.com/wp-content/uploads/2025/01/slidesJorda.pdf)

## Stata 复现

The "Replication Code" zip file contains the STATA code used in the paper "Inference for Local Projections" by Atsushi Inoue, Oscar Jorda and Guido Kuersteiner. The folder contains the following files:

1.  `Figure1.do` Compares Newey-West bands with LP-FGLS as in Lusompa (2023, Quantitative Economics)
2.  `Figure2.do` Compares Newey-West bands with Lag-Augmented bands as in Montiel-Olea and Plagborg-Moller (2021 Econometrica)
3.  `Figure3.do` Compares Newey-West bands with sup-t bands as in Montiel-Olea and Plagborg-Moller (2019 Journal of Applied Econometrics)
4.  `Figure4.do` Empirical example using significance bands on the response of shelter PCE inflation to a monetary shock using Bauer and Swanson (2023 NBER Macro Annual)
5.  `Figure5.do` Monte Carlo exercises showing the probability coverage of significance bands
6.  `sigband_shelterinf.dta` Dataset for Figure 4 The naming convention follows that of the figures in the paper.

## 论文复现-Stata：

Kolesár, M., & Plagborg-M?ller, M. (2025). Dynamic Causal Effects in a Nonlinear World: the Good, the Bad, and the Ugly. *Journal of Business & Economic Statistics*, 2025, accepted. [Link](https://doi.org/10.48550/arXiv.2411.10415), [PDF](https://arxiv.org/pdf/2411.10415.pdf), [Google](<https://scholar.google.com/scholar?q=Dynamic Causal Effects in a Nonlinear World: the Good, the Bad, and the Ugly>). [Stata code](https://github.com/mikkelpm/nonlinear_dynamic_causal)  
- [Abstract](https://www.mikkelpm.com/research/#/) - [Working paper](https://www.mikkelpm.com/files/nonlinear_causal.pdf) - [Supplement](https://www.mikkelpm.com/files/nonlinear_causal_supplement.pdf) - [Slides](https://www.mikkelpm.com/files/nonlinear_causal_slides.pdf) - [Rejoinder to discussants](https://www.mikkelpm.com/files/nonlinear_causal_rejoinder.pdf) - [Stata code](https://github.com/mikkelpm/nonlinear_dynamic_causal) - [arXiv](https://arxiv.org/abs/2411.10415)


# 论文复现：Local Projection 的 8 个应用

简要介绍 Local Projection 的原理。   
重点在于：复现这篇文章中介绍的 8 个 Examples 的 Stata 实操：[-Replication-](https://doi.org/10.3886/E208590V1)。

- Jordà, ò., & Taylor, A. M. (2025). Local Projections. Journal of Economic Literature, 63(1), 59–110. [Link](https://doi.org/10.1257/jel.20241521) (rep), [PDF](http://sci-hub.ren/10.1257/jel.20241521), [Appendix](https://www.aeaweb.org/doi/10.1257/jel.20241521.appx), [Google](<https://scholar.google.com/scholar?q=Local Projections>). [-Replication-](https://doi.org/10.3886/E208590V1), [github](https://github.com/ojorda/JEL-Code)


## Stata 实操

代码和数据：[-Replication-](https://doi.org/10.3886/E208590V1), [github](https://github.com/ojorda/JEL-Code)

Folder name: Output figures shown in the paper

- Example1\_LongDifferences: Figure1a.pdf, Figure1b.pdf
- Example2\_Multipliers: Figure2a.pdf, Figure2b.pdf, Figure9a.pdf, Figure9b.pdf
- Example3\_Smoothing: Figure3.pdf
- Example4\_LagAugmentation: Figure4.pdf
- Example5\_SignificanceBands: Figure5a.pdf, Figure5b.pdf
- Example6\_JointInference: Figure6a.pdf, Figure6b.pdf
- Example7\_MinimumDistance: Figure7a.pdf, Figure7b.pdf, Figure7c.pdf, Figure7d.pdf
- Example8\_Counterfactuals: Figure8a.pdf, Figure8b.pdf
- Example9\_StateDependence: Figure10a.pdf, Figure10b.pdf

The STATA programs rely on various packages which need to be installed for the code to run. If an error message occurs, search for and install the required package. In addition, correct output of the figures requires the fonts Palatino and cmsy10 to be installed. Most do files can be run individually, but some folders also include an all.do file which will run all programs in that folder. Each do file sets the current directory and users will need to amend those lines to point to their own directory path.

### 需要安装的外部命令

```stata
ssc install estout
ssc install ivreg2
ssc install xtscc
ssc install sxpose
ssc install lpdid
ssc install xtivreg28
ssc install freduse
ssc install egenmore
ssc install outreg2
ssc install boottest
ssc install levelsof
ssc install ranktestto
ssc install matselrc
```





# Local Projection：简介

这篇推文的任务是介绍 LP 的基本原理和相关理论基础，不涉及实操。 

- Jordà, ò. (2023). Local Projections for Applied Economics. Annual Review of Economics, 15(1), 607–631. [Link](https://doi.org/10.1146/annurev-economics-082222-065846), [PDF](http://sci-hub.ren/10.1146/annurev-economics-082222-065846), [Google](<https://scholar.google.com/scholar?q=Local Projections for Applied Economics>).
- Jordà, ò., & Taylor, A. M. (2025). Local Projections. Journal of Economic Literature, 63(1), 59–110. [Link](https://doi.org/10.1257/jel.20241521) (rep), [PDF](http://sci-hub.ren/10.1257/jel.20241521), [Appendix](https://www.aeaweb.org/doi/10.1257/jel.20241521.appx), [Google](<https://scholar.google.com/scholar?q=Local Projections>). [-Replication-](https://doi.org/10.3886/E208590V1), [github](https://github.com/ojorda/JEL-Code)
- Plagborg-Møller, M., & Wolf, C. K. (2021). Local Projections and VARs Estimate the Same Impulse Responses. Econometrica, 89(2), 955–980. [Link](https://doi.org/10.3982/ECTA17813) (rep), [PDF](http://sci-hub.ren/10.3982/ECTA17813), [Google](<https://scholar.google.com/scholar?q=Local Projections and VARs Estimate the Same Impulse Responses>).
- 这篇文章的 [Slides](https://static1.squarespace.com/static/5f4fc8d353469c7584b4f560/t/68124474927e6f6774afac60/1746027643504/DualLP+%288%29.pdf) 讲的蛮清楚的。
  - Coulombe, P. G., & Klieber, K. (2025). Opening the Black Box of Local Projections (Version 1). arXiv. [Link](https://doi.org/10.48550/arXiv.2505.12422) (rep), [PDF](https://arxiv.org/pdf/2505.12422.pdf), [Google](<https://scholar.google.com/scholar?q=Opening the Black Box of Local Projections (Version 1)>). [R codes](https://github.com/philgoucou/LPdecomposition), [Slides](https://static1.squarespace.com/static/5f4fc8d353469c7584b4f560/t/68124474927e6f6774afac60/1746027643504/DualLP+%288%29.pdf)
- 基本原理：Simon Lloyd, 2024, Introduction to Local Projections. Slides. [Link](https://splloyd-econ.github.io/Lloyd_CCBS_LP_Slides_2024.pdf)



## 软件实现

简要介绍在不同的软件中使用什么命令或 Packages 实现即可，无需展开。

只需要把 [Jordà, ò - local projections](https://sites.google.com/site/oscarjorda/home/local-projections?pli=1) 中的内容整理一下即可。 

### STATA code

-   STATA now has its own native command [lpirf](https://www.stata.com/manuals/tslpirf.pdf)

-   Replication code for all examples in the review article "[Local Projections](https://www.frbsf.org/research-and-insights/publications/working-papers/2024/08/local-projections/)" (joint with [Alan Taylor,](https://sites.google.com/view/amtaylor/home) forthcoming in the Journal of Economic Literature), is available here:

<https://github.com/ojorda/JEL-Code>

-   Replication code for all examples in the review article "[Inference for Local Projections](https://arxiv.org/abs/2306.03073)" (with Atsushi Inoue and Guido Kuersteiner, prepared for The Econometrics Journal), is available here:

<https://github.com/ojorda/Econometrics-Journal>

### Julia codes

- [Julia codes for Local projection](https://juliapackages.com/p/localprojections), [github](https://github.com/junyuan-chen/LocalProjections.jl)

### R code: package lpirfs

-   Code prepared by Philipp Adämmer. [Here is a description of its capabilities](https://cran.r-project.org/web/packages/lpirfs/lpirfs.pdf)


### MATLAB code
Silvia Miranda Agrippino's MATLAB code for "The Transmission of Monetary Policy Shocks" (with G. Ricco). 

-   [typical and Bayesian local projections available here](http://silviamirandaagrippino.com/code-data)

- replication code for "Impulse responses by smooth local projections" by Barnichon and Brownlees
  - [code from the Review and Economic Statistics publication available here](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/8KQJBJ)

- [Simulation study of Local Projections, VARs, and related estimators](https://github.com/dake-li/lp_var_simul)




### Bayesian local projections

-   Amaze Lusompa has written a great paper on how to think about Bayesian local projections. [Check his research here](https://sites.google.com/uci.edu/amazelusompa/research)

### inference

-   [Mikkel Plagborg-Møller](https://mikkelpm.scholar.princeton.edu/) is doing great research on local projections. Check his papers here: <https://www.mikkelpm.com/research/>

### other applications of local projections

-   My colleague [Regis Barnichon](https://www.frbsf.org/our-people/economists/regis-barnichon/) has written a series of very interesting papers. Check his research here: <https://sites.google.com/site/regisbarnichon/>

### references

main reference: 

- Jordà, ò. (2005). Estimation and Inference of Impulse Responses by Local Projections. American Economic Review, 95(1), 161–182. [Link](https://doi.org/10.1257/0002828053828518) (rep), [PDF](http://sci-hub.ren/10.1257/0002828053828518), [Appendix](https://www.aeaweb.org/doi/10.1257/0002828053828518.appx), [Google](<https://scholar.google.com/scholar?q=Estimation and Inference of Impulse Responses by Local Projections>), [-cited-](https://scholar.google.com/scholar?oi=bibs&hl=en&cites=17126337218822101214,17923124496323615981)


### Review articles on local projections that provide an overview:

- Jordà, ò., & Taylor, A. M. (2025). Local Projections. Journal of Economic Literature, 63(1), 59–110. [Link](https://doi.org/10.1257/jel.20241521) (rep), [PDF](http://sci-hub.ren/10.1257/jel.20241521), [Appendix](https://www.aeaweb.org/doi/10.1257/jel.20241521.appx), [Google](<https://scholar.google.com/scholar?q=Local Projections>). [-Replication-](https://doi.org/10.3886/E208590V1), [github](https://github.com/ojorda/JEL-Code)
- Inoue, A., Jordà, ò., & Kuersteiner, G. M. (2025). Inference for local projections. The Econometrics Journal. [Link](https://doi.org/10.1093/ectj/utaf004), [PDF](http://sci-hub.ren/10.1093/ectj/utaf004), [Google](<https://scholar.google.com/scholar?q=Inference for local projections>). [github-Stata codes](https://github.com/ojorda/Econometrics-Journal), [Slides](https://www.jamelsaadaoui.com/wp-content/uploads/2025/01/slidesJorda.pdf)


## 参考文献- 
note: 这些文献，以及你写推文时新增的文献都要同一列在这里。

- Jordà, ò. (2023). Local Projections for Applied Economics. Annual Review of Economics, 15(1), 607–631. [Link](https://doi.org/10.1146/annurev-economics-082222-065846), [PDF](https://www.annualreviews.org/docserver/fulltext/economics/15/1/annurev-economics-082222-065846.pdf?expires=1752910574&id=id&accname=guest&checksum=55A163CF0E40FE7566BA2C55C7FE3B1A), [Google](<https://scholar.google.com/scholar?q=Local Projections for Applied Economics>).
- Jordà, ò., & Taylor, A. M. (2025). Local Projections. Journal of Economic Literature, 63(1), 59–110. [Link](https://doi.org/10.1257/jel.20241521) (rep), [PDF](http://sci-hub.ren/10.1257/jel.20241521), [Appendix](https://www.aeaweb.org/doi/10.1257/jel.20241521.appx), [Google](<https://scholar.google.com/scholar?q=Local Projections>). [-Replication-](https://doi.org/10.3886/E208590V1), [github](https://github.com/ojorda/JEL-Code)
- Plagborg-Møller, M., & Wolf, C. K. (2021). Local Projections and VARs Estimate the Same Impulse Responses. Econometrica, 89(2), 955–980. [Link](https://doi.org/10.3982/ECTA17813) (rep), [PDF](https://onlinelibrary.wiley.com/doi/epdf/10.3982/ECTA17813), [Google](<https://scholar.google.com/scholar?q=Local Projections and VARs Estimate the Same Impulse Responses>).
- Montiel Olea, J. L., & Plagborg-Møller, M. (2021). Local Projection Inference Is Simpler and More Robust Than You Think. Econometrica, 89(4), 1789–1823. [Link](https://doi.org/10.3982/ECTA18756) (rep), [PDF](http://sci-hub.ren/10.3982/ECTA18756), [Google](<https://scholar.google.com/scholar?q=Local Projection Inference Is Simpler and More Robust Than You Think>).
- Li, D., Plagborg-M?ller, M., & Wolf, C. K. (2024). Local projections vs. VARs: Lessons from thousands of DGPs. Journal of Econometrics, 244(2), 105722. [Link](https://doi.org/10.1016/j.jeconom.2024.105722), [PDF](https://arxiv.org/pdf/2104.00655.pdf), [Google](<https://scholar.google.com/scholar?q=Local projections vs. VARs: Lessons from thousands of DGPs>).
  - [Abstract](https://www.mikkelpm.com/research/#/) - [Published version](https://doi.org/10.1016/j.jeconom.2024.105722) (open access) - [Working paper](https://www.mikkelpm.com/files/lp_var_simul.pdf) - [Supplement](https://www.mikkelpm.com/files/lp_var_simul_supplement.pdf) - [Slides](https://www.mikkelpm.com/files/lp_var_simul_slides.pdf) - [Matlab code](https://github.com/dake-li/lp_var_simul) - [arXiv](https://arxiv.org/abs/2104.00655)






















